(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{232:function(e,t,a){e.exports=a(455)},455:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),i=a(19),u=(a(237),a(230)),o=a(58),s=a(35),m=a(150),d=a.n(m);a(246);d.a.initializeApp({apiKey:"AIzaSyAHQoH0ZAhFrRRKj9alF4m6w3vSOfpbxQ8",authDomain:"crlab-admin.firebaseapp.com",databaseURL:"https://crlab-admin.firebaseio.com",projectId:"crlab-admin",storageBucket:"crlab-admin.appspot.com",messagingSenderId:"452369537329",appId:"1:452369537329:web:bc5f621ac26b863c"});var p=d.a,f=r.a.createContext(),b=a(17),E=a(18),y=a(458),v=a(157),g=a(10),h=a(36);function O(){var e=Object(b.a)(["\n  height: 32px;\n  margin: 16px;\n  text-align: center;\n  color: #fff;\n  font-size: 16px;\n"]);return O=function(){return e},e}var j=E.a.div(O()),k=a(22),I=a(21),x={IMG:Symbol("img"),IMGS_WITH_CAPTION:Symbol("imgs-with-caption"),FIELD:Symbol("field"),MULTI_FIELDS:Symbol("multi-fields"),MULTI_FIELDS_OF_FIELDS:Symbol("multi-fields-of-fields")},w=a(11),C=a.n(w),L=a(16),D=a(57),R=a.n(D),T=a(464),F=a(465),S=a(456),K=a(457),V=a(459),P=a(213),M=a.n(P),A=p.database(),U=p.storage(),N=function(e,t,a){return A.ref("".concat(e,"/").concat(t)).set(a).then(function(){return console.log("CREATE ".concat(e," ").concat(t," COMPLETE"))}).catch(function(a){throw console.error("CREATE ".concat(e," ").concat(t," ERROR: ").concat(a)),a})},Y=function(e){return A.ref(e).orderByChild("timestamp").once("value").then(function(e){return e.val()}).catch(function(t){throw console.error("GET ALL ".concat(e," ERROR"),t),t})},q=function(e,t){var a=t?"".concat(e,"/").concat(t):e;return A.ref(a).once("value").then(function(e){return e.val()}).catch(function(e){throw console.error("GET ".concat(a," ERROR: ").concat(e)),e})},B=function(e,t,a){var n=a?"".concat(e,"/").concat(a):e;return A.ref(n).update(t).then(function(){return console.log("UPDATE ".concat(n," COMPLETE"))}).catch(function(e){throw console.error("UPDATE ".concat(n," ERROR: ").concat(e)),e})},_=function(e,t){return A.ref("".concat(e,"/").concat(t)).remove().then(function(){return console.log("REMOVE ".concat(e," ").concat(t," COMPLETE"))}).catch(function(a){throw console.error("REMOVE ".concat(e," ").concat(t," ERROR: ").concat(a)),a})},H=function(){var e=Object(L.a)(C.a.mark(function e(t,a,n){var r,c,l,i;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.ref();case 2:return r=e.sent,c=r.child("".concat(t.substr(1),"/").concat(a)),e.prev=4,e.next=7,c.put(n);case 7:return l=e.sent,e.next=10,r.child("".concat(t.substr(1),"/").concat(a)).getDownloadURL();case 10:return i=e.sent,e.abrupt("return",{image:l,imageURL:i});case 14:throw e.prev=14,e.t0=e.catch(4),e.t0;case 17:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t,a,n){return e.apply(this,arguments)}}(),G=function(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)([]),i=Object(s.a)(l,2),u=i[0],o=i[1];return Object(n.useEffect)(function(){(function(){var t=Object(L.a)(C.a.mark(function t(){var a;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),t.prev=1,t.next=4,Y(e);case 4:a=t.sent,o(M.a.values(a)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("FETCH ".concat(e," LIST ERROR"),t.t0);case 11:return t.prev=11,c(!1),t.finish(11);case 14:case"end":return t.stop()}},t,null,[[1,8,11,14]])}));return function(){return t.apply(this,arguments)}})()()},[e]),{isLoading:r,setIsLoading:c,setData:o,data:u}},z=a(462),W=r.a.forwardRef(function(e,t){var a=e.setSelectedKeys,c=e.confirm,l=e.clearFilters,i=e.dataIndex,u=Object(n.useState)(""),o=Object(s.a)(u,2),m=o[0],d=o[1],p=function(){c()};return r.a.createElement("div",{style:{padding:8}},r.a.createElement(z.a,{ref:t,value:m,placeholder:"Search ".concat(i),onChange:function(e){d(e.target.value),a(e.target.value?[e.target.value]:[])},onPressEnter:p,style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(h.a,{type:"primary",onClick:p,icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),r.a.createElement(h.a,{onClick:function(){d(""),l()},size:"small",style:{width:90}},"Reset"))}),J=function(e){var t=Object(n.useRef)(null);return{filterDropdown:function(a){return r.a.createElement(W,Object.assign({ref:t,dataIndex:e},a))},filterIcon:function(e){return r.a.createElement(g.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return t.current.select()})}}},Q=function(){var e=G("/projects"),t=e.data,a=e.setData,c=e.isLoading,l=e.setIsLoading,u=Object(n.useCallback)(function(){var e=Object(L.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,_("/projects",t);case 4:a(function(e){return e.filter(function(e){return e.uuid!==t})}),T.a.success({message:"Remove Complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),T.a.error({message:"Remove Error!",description:"".concat(e.t0),duration:4});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),[l,a]),o=Object(n.useCallback)(function(e){return e&&r.a.createElement("span",null,e.map(function(e){return r.a.createElement(F.a,{color:"volcano",key:e},e.toUpperCase())}))},[]),s=Object(n.useCallback)(function(e){return R()(e).local().format("YYYY/MM/DD HH:mm:ss")},[]),m=Object(n.useCallback)(function(e,t){return r.a.createElement("span",null,r.a.createElement(i.b,{to:"/projects/".concat(t.uuid,"/edit")},"Edit"),r.a.createElement(S.a,{type:"vertical"}),r.a.createElement(K.a,{title:"Are you sure to delete ?",onConfirm:function(){return u(t.uuid)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"javascript:;"},"Delete")))},[u]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/projects/create"},r.a.createElement(h.a,{type:"primary",style:{marginLeft:"15px",marginBottom:"15px"}},"Create")),r.a.createElement(V.a,{dataSource:t,loading:c,rowKey:function(e){return e.uuid}},r.a.createElement(V.a.Column,Object.assign({title:"Title",dataIndex:"title",key:"title"},J("title"))),r.a.createElement(V.a.Column,{title:"Year",dataIndex:"year",key:"year",sorter:function(e,t){return parseInt(e.year)-parseInt(t.year)}}),r.a.createElement(V.a.Column,{title:"Tags",dataIndex:"tags",key:"tags",render:o}),r.a.createElement(V.a.Column,{title:"Last edit",dataIndex:"timestamp",key:"timestamp",render:s}),r.a.createElement(V.a.Column,{title:"Action",key:"action",render:m})))},$=a(461),Z=a(54);function X(){var e=Object(b.a)(["\n  width: 60%;\n"]);return X=function(){return e},e}function ee(){var e=Object(b.a)(["\n  margin-left: 10px;\n"]);return ee=function(){return e},e}function te(){var e=Object(b.a)(["\n  width: 80%;\n"]);return te=function(){return e},e}function ae(){var e=Object(b.a)(["\n  width: 80%;\n"]);return ae=function(){return e},e}function ne(){var e=Object(b.a)(["\n  margin-bottom: unset;\n"]);return ne=function(){return e},e}function re(){var e=Object(b.a)(["\n  width: 150%;\n  margin-bottom: -20px;\n  z-index: 1;\n"]);return re=function(){return e},e}var ce=Object(E.a)($.a.Item).attrs(function(){return{wrapperCol:{span:20}}})(re()),le=Object(E.a)($.a.Item).attrs(function(){return{wrapperCol:{span:12,offset:2}}})(ne()),ie=Object(E.a)(z.a.TextArea)(ae()),ue=Object(E.a)(z.a)(te()),oe=Object(E.a)(g.a).attrs(function(){return{type:"minus-circle-o"}})(ee()),se=Object(E.a)(h.a).attrs(function(){return{type:"dashed"}})(X()),me=function(e){var t=e.dataKey,a=e.getFieldDecorator,c=e.getFieldValue,l=e.setFieldsValue,i=e.validationRules,u=void 0===i?[]:i,o=e.isTextArea,s=void 0!==o&&o,m=e.limitedFieldNums;a("".concat(t,"-idx"),{initialValue:[0]});var d=c("".concat(t,"-idx")),p=Object(n.useRef)(d.length),f=function(e){return function(){var a=c("".concat(t,"-idx"));1!==a.length&&l(Object(k.a)({},"".concat(t,"-idx"),a.filter(function(t){return t!==e})))}},b=Object(n.useCallback)(function(){var e=c("".concat(t,"-idx"));l(Object(k.a)({},"".concat(t,"-idx"),[].concat(Object(Z.a)(e),[p.current]))),p.current=p.current+1},[c,l,t]);return r.a.createElement(r.a.Fragment,null,d.map(function(e){return r.a.createElement(ce,{key:e},a("".concat(t,"[").concat(e,"]"),{rules:u})(s?r.a.createElement(ie,{autosize:!0}):r.a.createElement(ue,null)),d.length>1&&r.a.createElement(oe,{onClick:f(e)}))}),!(m&&d.length>=m)&&r.a.createElement(le,null,r.a.createElement(se,{onClick:b},r.a.createElement(g.a,{type:"plus"})," Add field")))},de=a(460),pe=a(463),fe=a(119),be=a.n(fe);function Ee(){var e=Object(b.a)(["\n  width: 100%;\n"]);return Ee=function(){return e},e}var ye=E.a.img(Ee()),ve=r.a.createElement("div",null,r.a.createElement(g.a,{type:"plus"}),r.a.createElement("div",null,"Drag or Click to upload")),ge=function(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})},he=function(e){var t=e.dataKey,a=e.getFieldDecorator,c=e.getFieldValue,l=e.setFieldsValue,i=e.endpoint,u=void 0===i?"":i,o=e.isSingleImg,m=void 0!==o&&o,d=e.withCaption,p=void 0!==d&&d;a(t,{initialValue:[]});var f=Object(n.useState)({previewVisible:!1,previewImage:""}),b=Object(s.a)(f,2),E=b[0],y=b[1],v=Object(n.useCallback)(function(){var e=Object(L.a)(C.a.mark(function e(a){var n,r,i,o,s,m,d,p,f;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.onError,r=a.onSuccess,i=a.file,e.prev=1,o=i.name,e.next=5,H(u,o,i);case 5:s=e.sent,m=s.image,d=s.imageURL,p={uuid:be()(),file:Object(I.a)({},i,{name:o,url:d}),caption:""},f=c(t),l(Object(k.a)({},t,[].concat(Object(Z.a)(f),[p]))),r(null,m),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),n(e.t0);case 17:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}(),[c,l,u,t]),g=Object(n.useCallback)(function(){return y(function(e){return Object(I.a)({},e,{previewVisible:!1})})},[y]),h=Object(n.useCallback)(function(){var e=Object(L.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,ge(t.originFileObj);case 3:t.preview=e.sent;case 4:y({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[y]),O=Object(n.useCallback)(function(e){return!("image/jpeg"!==e.type&&"image/png"!==e.type)||(T.a.error({message:"You can only upload png or jpg file.",duration:2}),!1)},[]),j=Object(n.useCallback)(function(e){var a=c(t).filter(function(t){return!(t.file.uid===e.uid)});l(Object(k.a)({},t,a))},[c,l,t]),x=Object(n.useCallback)(function(){var e=c(t);return e?e.reduce(function(e,t){return[].concat(Object(Z.a)(e),[t.file])},[]):[]},[c,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{name:"files",listType:"picture-card",defaultFileList:x(),customRequest:v,onPreview:h,onRemove:j,beforeUpload:O},!(m&&c(t)&&c(t).length>=1)&&ve),p&&c(t)&&c(t).map(function(e,a){return r.a.createElement(z.a,{key:"".concat(e.file.name,"-").concat(a),value:e.caption,onChange:(n=e.file.uid,function(e){var a=c(t).map(function(t){return t.file.uid===n?{uid:n,file:t.file,caption:e.target.value}:t});l(Object(k.a)({},t,a))})});var n}),r.a.createElement(pe.a,{visible:E.previewVisible,footer:null,onCancel:g},r.a.createElement(ye,{alt:"example",src:E.previewImage})))};function Oe(){var e=Object(b.a)(["\n  margin-bottom: 0;\n"]);return Oe=function(){return e},e}var je=Object(E.a)($.a.Item)(Oe()),ke=function(e){var t=e.dataKey,a=e.validationRules,n=void 0===a?[]:a,c=e.inputProps,l=void 0===c?{}:c,i=e.getFieldDecorator;return r.a.createElement($.a.Item,null,i(t,{rules:n})(r.a.createElement(z.a.TextArea,Object.assign({},l,{autosize:!0}))))},Ie=function(e){var t=e.dataKey,a=e.validationRules,n=void 0===a?[]:a,c=e.inputProps,l=void 0===c?{}:c,i=e.getFieldDecorator;return r.a.createElement($.a.Item,null,i(t,{rules:n})(r.a.createElement(z.a,l)))},xe=a(219);function we(){var e=Object(b.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  font-size: 24;\n"]);return we=function(){return e},e}var Ce=Object(E.a)(g.a).attrs(function(){return{type:"loading",spin:!0}})(we()),Le=function(){return r.a.createElement(xe.a,{indicator:r.a.createElement(Ce,null)})},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=Object(n.useState)(!0),r=Object(s.a)(a,2),c=r[0],l=r[1],i=Object(n.useState)({}),u=Object(s.a)(i,2),o=u[0],m=u[1],d=arguments.length;return Object(n.useEffect)(function(){t||1===d?function(){var a=Object(L.a)(C.a.mark(function a(){var n;return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l(!0),a.prev=1,a.next=4,q(e,t);case 4:(n=a.sent)&&m(n),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log("FETCH ".concat(t," AT ").concat(e," ERROR"),a.t0);case 11:return a.prev=11,l(!1),a.finish(11);case 14:case"end":return a.stop()}},a,null,[[1,8,11,14]])}));return function(){return a.apply(this,arguments)}}()():l(!1)},[e,t]),{data:o,isLoading:c}},Re=function(e){var t=e.data,a=e.dataBindingConfs,r=e.getFieldDecorator,c=e.setFieldsValue,l=Object(n.useCallback)(function(){a.forEach(function(e){var t=e.type,a=e.key;r(t===x.MULTI_FIELDS?"".concat(a,"-idx"):a)})},[a,r]),i=Object(n.useCallback)(function(e){var t={},n={};a.forEach(function(a){var r=a.key,c=a.type,l=a.defaultValue,i=a.defaultKeys;if(c===x.IMGS_WITH_CAPTION){var u=e[r]?e[r].map(function(e,t){return{file:{uid:"img-".concat(t),name:e.name,status:"done",url:e.url},caption:e.caption}}):l;t[r]=u}else if(c===x.IMG){var o=e[r]?[{file:{uid:"singleImg",name:e[r][0].name,status:"done",url:e[r][0].url},caption:""}]:l;t[r]=o}else if(c===x.MULTI_FIELDS){var s=e[r]?Object(Z.a)(Array(e[r].length)).map(function(e,t){return t}):i;t["".concat(r,"-idx")]=s,n[r]=e[r]?e[r]:l}else t[r]=e[r]?e[r]:l}),c(t),setTimeout(function(){return c(n)},0)},[a,c]);Object(n.useEffect)(function(){l()},[l]),Object(n.useEffect)(function(){Object.keys(t).length>0&&i(t)},[t,i])},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={};return t.forEach(function(t){var n=t.type,r=t.key;a[r]=n===x.IMGS_WITH_CAPTION?e[r].map(function(e){return{name:e.file.name,url:e.file.url,caption:e.caption}}):n===x.IMG?e[r].map(function(e){return{name:e.file.name,url:e.file.url}}):n===x.MULTI_FIELDS?e[r]?e[r].filter(function(e){return!!e}):[]:e[r]?e[r]:""}),a},Fe=function(){var e=Object(L.a)(C.a.mark(function e(t,a){var n,r=arguments;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>2&&void 0!==r[2]?r[2]:"",e.prev=1,!n){e.next=9;break}return t.uuid=n,t.timestamp=Date.now(),e.next=7,B(a,t,n);case 7:e.next=14;break;case 9:return t.uuid=be()(),t.createdTimestamp=Date.now(),t.timestamp=t.createdTimestamp,e.next=14,N(a,t.uuid,t);case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(1),console.log("e:",e.t0),e.t0;case 20:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t,a){return e.apply(this,arguments)}}(),Se=function(){var e=Object(L.a)(C.a.mark(function e(t,a){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.createdTimestamp=Date.now(),t.timestamp=t.createdTimestamp,e.next=5,B(a,t);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}();function Ke(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return Ke=function(){return e},e}var Ve=E.a.div(Ke()),Pe=$.a.create()(function(e){var t=e.form,a=e.match,c=e.history,l=t.validateFields,u=De("/projects",a.params.uuid),o=u.data,s=void 0===o?{}:o,m=u.isLoading,d=void 0===m||m;Re(Object(I.a)({},t,{data:s,dataBindingConfs:Ae}));var p=Object(n.useCallback)(function(e){e.preventDefault(),l(function(){var e=Object(L.a)(C.a.mark(function e(t,n){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=14;break}return e.prev=1,r=Te(n,Ae),e.next=5,Fe(r,"/projects",a.params.uuid);case 5:T.a.success({message:"Create/Edit ".concat(n.title," complete!"),duration:4}),c.push("/projects/list"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),T.a.error({message:"Upload ".concat(n.title," error!"),description:"".concat(e.t0),duration:2});case 12:e.next=15;break;case 14:console.log("PROJECT ON SUBMIT ERROR:",t);case 15:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,a){return e.apply(this,arguments)}}())},[l,a.params.uuid,c]);return d?r.a.createElement(Le,null):r.a.createElement($.a,{onSubmit:p,labelCol:{span:3},wrapperCol:{span:12,offset:1}},r.a.createElement($.a.Item,{label:"UUID"},s.uuid?r.a.createElement("strong",null,s.uuid):""),r.a.createElement(je,{label:"Show title"},r.a.createElement(Ie,Object.assign({dataKey:Ue.showTitle,validationRules:[{required:!0,message:"Please set the show title which will show on the enter image of this project."}]},t))),r.a.createElement(je,{label:"Title"},r.a.createElement(Ie,Object.assign({dataKey:Ue.title,validationRules:[{required:!0,message:"Please set the title of this project."}]},t))),r.a.createElement(je,{label:"Year"},r.a.createElement(Ie,Object.assign({dataKey:Ue.year,validationRules:[{validator:function(e,t){return!isNaN(t)},message:"The input must be a number."},{required:!0,message:"Please set the starting year of this project."}]},t))),r.a.createElement($.a.Item,{label:"Authors"},r.a.createElement(me,Object.assign({dataKey:Ue.authors,validationRules:[{required:!0,message:"Please set at least one author of this project, and remove unuse feild."}]},t))),r.a.createElement($.a.Item,{label:"Cover"},r.a.createElement(he,Object.assign({title:"Cover",dataKey:Ue.cover,isSingleImg:!0,endpoint:"/projects"},t))),r.a.createElement($.a.Item,{label:"Images"},r.a.createElement(he,Object.assign({dataKey:Ue.imgs,withCaption:!0},t))),r.a.createElement($.a.Item,{label:"Video links"},r.a.createElement(me,Object.assign({dataKey:Ue.videos,validationRules:[{type:"url",message:"Input must be a link."}]},t))),r.a.createElement(je,{label:"Abstract"},r.a.createElement(ke,Object.assign({dataKey:Ue.abstract,validationRules:[{required:!0,message:"Please set the abstract of this project."}]},t))),r.a.createElement($.a.Item,{label:"Descriptions"},r.a.createElement(me,Object.assign({dataKey:Ue.descriptions,validationRules:[{required:!0,message:"Please set at least one description section of this project, and remove unuse feild."}],isTextArea:!0},t))),r.a.createElement($.a.Item,{label:"Tags"},r.a.createElement(me,Object.assign({dataKey:Ue.tags},t))),r.a.createElement(je,{label:"Publication on"},r.a.createElement(Ie,Object.assign({dataKey:Ue.publicationOn},t))),r.a.createElement(je,{label:"Accepted year"},r.a.createElement(Ie,Object.assign({dataKey:Ue.acceptedYear,validationRules:[{validator:function(e,t){return void 0===t||!isNaN(t)},message:"Input must be a number."}]},t))),r.a.createElement(je,{label:"PDF link"},r.a.createElement(Ie,Object.assign({dataKey:Ue.pdf,validationRules:[{type:"url",message:"Input must be a link."}]},t))),r.a.createElement(je,{label:"DOI link"},r.a.createElement(Ie,Object.assign({dataKey:Ue.doi,validationRules:[{type:"url",message:"Input must be a link."}]},t))),r.a.createElement(Ve,null,r.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(i.b,{to:"/projects/list"},r.a.createElement(h.a,{type:"danger"},"Back"))))}),Me={name:"Projects",path:"/projects",iconType:"project",page:function(e){var t=e.match.url;return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"".concat(t,"/list"),component:Q}),r.a.createElement(o.b,{path:"".concat(t,"/:uuid/edit"),component:Pe}),r.a.createElement(o.b,{path:"".concat(t,"/create"),component:Pe}),r.a.createElement(o.a,{from:"*",to:"".concat(t,"/list")}))}},Ae=[{type:x.FIELD,key:"showTitle",defaultValue:""},{type:x.FIELD,key:"title",defaultValue:""},{type:x.FIELD,key:"year",defaultValue:""},{type:x.MULTI_FIELDS,key:"authors",defaultValue:[],defaultKeys:[0]},{type:x.FIELD,key:"abstract",defaultValue:""},{type:x.IMG,key:"cover",defaultValue:[]},{type:x.IMGS_WITH_CAPTION,key:"imgs",defaultValue:[]},{type:x.MULTI_FIELDS,key:"videos",defaultValue:[],defaultKeys:[]},{type:x.MULTI_FIELDS,key:"descriptions",defaultValue:[],defaultKeys:[0]},{type:x.MULTI_FIELDS,key:"tags",defaultValue:[],defaultKeys:[]},{type:x.FIELD,key:"acceptedYear",defaultValue:""},{type:x.FIELD,key:"publicationOn",defaultValue:""},{type:x.FIELD,key:"pdf",defaultValue:""},{type:x.FIELD,key:"doi",defaultValue:""}],Ue=Ae.reduce(function(e,t){return Object(I.a)({},e,Object(k.a)({},t.key,t.key))},{}),Ne=function(){var e=G("/news"),t=e.data,a=e.setData,c=e.isLoading,l=e.setIsLoading,u=Object(n.useCallback)(function(){var e=Object(L.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,_("/news",t);case 4:a(function(e){return e.filter(function(e){return e.uuid!==t})}),T.a.success({message:"Remove Complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),T.a.error({message:"Remove Error!",description:"".concat(e.t0),duration:4});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),[a,l]),o=Object(n.useCallback)(function(e){return R()(e).local().format("YYYY/MM/DD HH:mm:ss")},[]),s=Object(n.useCallback)(function(e,t){return r.a.createElement("span",null,r.a.createElement(i.b,{to:"/news/".concat(t.uuid,"/edit")},"Edit"),r.a.createElement(S.a,{type:"vertical"}),r.a.createElement(K.a,{title:"Are you sure to delete ?",onConfirm:function(){return u(t.uuid)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"javascript:;"},"Delete")))},[u]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/news/create"},r.a.createElement(h.a,{type:"primary",style:{marginLeft:"15px",marginBottom:"15px"}},"Create")),r.a.createElement(V.a,{dataSource:t,loading:c,rowKey:function(e){return e.uuid}},r.a.createElement(V.a.Column,Object.assign({title:"Title",dataIndex:"title",key:"title"},J("title"))),r.a.createElement(V.a.Column,{title:"Date",dataIndex:"date",key:"date",sorter:function(e,t){return R()(e.date).unix()-R()(t.date).unix()}}),r.a.createElement(V.a.Column,{title:"Last edit",dataIndex:"timestamp",key:"timestamp",render:o,sorter:function(e,t){return parseInt(e.timestamp)-parseInt(t.timestamp)}}),r.a.createElement(V.a.Column,{title:"Action",key:"action",render:s})))};function Ye(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return Ye=function(){return e},e}var qe=E.a.div(Ye()),Be=$.a.create()(function(e){var t=e.form,a=e.match,c=e.history,l=t.validateFields,u=De("/news",a.params.uuid),o=u.data,s=void 0===o?{}:o,m=u.isLoading,d=void 0===m||m;Re(Object(I.a)({},t,{data:s,dataBindingConfs:He}));var p=Object(n.useCallback)(function(e){e.preventDefault(),l(function(){var e=Object(L.a)(C.a.mark(function e(t,n){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=14;break}return e.prev=1,r=Te(n,He),e.next=5,Fe(r,"/news",a.params.uuid);case 5:T.a.success({message:"Create/Edit ".concat(n.title," complete!"),duration:4}),c.push("/news/list"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),T.a.error({message:"Upload ".concat(n.title," error!"),description:"".concat(e.t0),duration:2});case 12:e.next=15;break;case 14:console.log("NEWS ON SUBMIT ERROR:",t);case 15:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,a){return e.apply(this,arguments)}}())},[l,a.params.uuid,c]);return d?r.a.createElement(Le,null):r.a.createElement($.a,{onSubmit:p,labelCol:{span:3},wrapperCol:{span:12,offset:1}},r.a.createElement($.a.Item,{label:"UUID"},s.uuid?r.a.createElement("strong",null,s.uuid):""),r.a.createElement(je,{label:"Title"},r.a.createElement(Ie,Object.assign({dataKey:Ge.title,validationRules:[{required:!0,message:"Please set the title of this news."}]},t))),r.a.createElement(je,{label:"Description"},r.a.createElement(ke,Object.assign({dataKey:Ge.description},t))),r.a.createElement(je,{label:"Date"},r.a.createElement(Ie,Object.assign({dataKey:Ge.date,validationRules:[{validator:function(e,t){return/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(t)},message:"Input must be format as YYYY-MM-DD."},{required:!0,message:"Please set the date of this news(YYYY-MM-DD)."}]},t))),r.a.createElement(qe,null,r.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(i.b,{to:"/news/list"},r.a.createElement(h.a,{type:"danger"},"Back"))))}),_e={name:"News",path:"/news",iconType:"alert",page:function(e){var t=e.match.url;return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"".concat(t,"/list"),component:Ne}),r.a.createElement(o.b,{path:"".concat(t,"/:uuid/edit"),component:Be}),r.a.createElement(o.b,{path:"".concat(t,"/create"),component:Be}),r.a.createElement(o.a,{from:"*",to:"".concat(t,"/list")}))}},He=[{type:x.FIELD,key:"title",defaultValue:""},{type:x.FIELD,key:"date",defaultValue:""},{type:x.FIELD,key:"description",defaultValue:""}],Ge=He.reduce(function(e,t){return Object(I.a)({},e,Object(k.a)({},t.key,t.key))},{}),ze=function(){var e=G("/members"),t=e.data,a=e.setData,c=e.isLoading,l=e.setIsLoading,u=Object(n.useCallback)(function(){var e=Object(L.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,_("/members",t);case 4:a(function(e){return e.filter(function(e){return e.uuid!==t})}),T.a.success({message:"Remove Complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),T.a.error({message:"Remove Error!",description:"".concat(e.t0),duration:4});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),[l,a]),o=Object(n.useCallback)(function(e){return R()(e).local().format("YYYY/MM/DD HH:mm:ss")},[]),s=Object(n.useCallback)(function(e,t){return r.a.createElement("span",null,r.a.createElement(i.b,{to:"/members/".concat(t.uuid,"/edit")},"Edit"),r.a.createElement(S.a,{type:"vertical"}),r.a.createElement(K.a,{title:"Are you sure to delete ?",onConfirm:function(){return u(t.uuid)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"javascript:;"},"Delete")))},[u]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/members/create"},r.a.createElement(h.a,{type:"primary",style:{marginLeft:"15px",marginBottom:"15px"}},"Create")),r.a.createElement(V.a,{dataSource:t,loading:c,rowKey:function(e){return e.uuid}},r.a.createElement(V.a.Column,Object.assign({title:"Name",dataIndex:"fullName",key:"fullName"},J("fullName"))),r.a.createElement(V.a.Column,Object.assign({title:"Title",dataIndex:"title",key:"title"},J("title"))),r.a.createElement(V.a.Column,{title:"Last edit",dataIndex:"timestamp",key:"timestamp",render:o,sorter:function(e,t){return parseInt(e.timestamp)-parseInt(t.timestamp)}}),r.a.createElement(V.a.Column,{title:"Action",key:"action",render:s})))},We=function(e){var t=e.dataKey,a=e.getFieldDecorator,c=e.getFieldValue,l=e.setFieldsValue,i=e.fields,u=void 0===i?[]:i;a("".concat(t,"-idx"),{initialValue:[]});var o=c("".concat(t,"-idx"));a(t,{initialValue:[]});var m=c(t),d=Object(n.useState)(!1),p=Object(s.a)(d,2),f=p[0],b=p[1],E=Object(n.useRef)(o.length),y=function(e){return function(){var a,n=c("".concat(t,"-idx")),r=Object(Z.a)(m);r[e]=void 0,l((a={},Object(k.a)(a,"".concat(t,"-idx"),n.filter(function(t){return t!==e})),Object(k.a)(a,t,r),a))}},v=Object(n.useCallback)(function(){var e=c("".concat(t,"-idx"));l(Object(k.a)({},"".concat(t,"-idx"),[].concat(Object(Z.a)(e),[E.current]))),E.current=E.current+1},[c,l,t]),h=function(e,a){return function(n){var r=Object(Z.a)(m);r[e]?r[e][a]=n.target.value:r[e]=u.reduce(function(e,t){return t.key===a?Object(I.a)({},e,Object(k.a)({},t.key,n.target.value)):Object(I.a)({},e,Object(k.a)({},t.key,""))},{}),l(Object(k.a)({},t,r))}};return Object(n.useEffect)(function(){if(!f&&m.length>0){var e=m.reduce(function(e,a,n){var r=Object.entries(a).reduce(function(e,a){var r=Object(s.a)(a,2),c=r[0],l=r[1];return Object(I.a)({},e,Object(k.a)({},"".concat(t,"-").concat(c,"-").concat(n),l))},{});return Object(I.a)({},e,r)},{});l(e),b(!0)}!f&&o.length<1&&b(!0)},[f,m,o,t,l,b]),r.a.createElement(r.a.Fragment,null,o.map(function(e){return r.a.createElement(ce,{key:e},u.map(function(n){var c=n.key,l=n.validationRules,i=n.inputParams,u=n.isTextArea;return r.a.createElement($.a.Item,{key:c},u?a("".concat(t,"-").concat(c,"-").concat(e),{rules:l})(r.a.createElement(ie,Object.assign({onChange:h(e,c),autosize:!0},i))):a("".concat(t,"-").concat(c,"-").concat(e),{rules:l})(r.a.createElement(ue,Object.assign({onChange:h(e,c)},i))))}),o.length>0&&r.a.createElement(oe,{onClick:y(e)}))}),r.a.createElement(le,null,r.a.createElement(se,{onClick:v},r.a.createElement(g.a,{type:"plus"})," Add field")))};function Je(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return Je=function(){return e},e}var Qe=E.a.div(Je()),$e=$.a.create()(function(e){var t=e.form,a=e.match,c=e.history,l=t.validateFields,u=De("/members",a.params.uuid),o=u.data,s=void 0===o?{}:o,m=u.isLoading,d=void 0===m||m;Re(Object(I.a)({},t,{data:s,dataBindingConfs:Xe}));var p=Object(n.useCallback)(function(e){e.preventDefault(),l(function(){var e=Object(L.a)(C.a.mark(function e(t,n){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=16;break}return console.log("Received values of form: ",n),e.prev=2,r=Te(n,Xe),e.next=6,Fe(r,"/members",a.params.uuid);case 6:T.a.success({message:"Create/Edit ".concat(n.fullName," Info. complete!"),duration:4}),c.push("/members/list"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),T.a.error({message:"Create ".concat(n.fullName," error!"),description:"".concat(e.t0),duration:2});case 14:e.next=17;break;case 16:console.log("MEMBER ON SUBMIT ERROR:",t);case 17:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t,a){return e.apply(this,arguments)}}())},[l,a.params.uuid,c]);return d?r.a.createElement(Le,null):r.a.createElement($.a,{onSubmit:p,labelCol:{span:3},wrapperCol:{span:12,offset:1}},r.a.createElement($.a.Item,{label:"UUID"},s.uuid?r.a.createElement("strong",null,s.uuid):""),r.a.createElement(je,{label:"Full name"},r.a.createElement(Ie,Object.assign({dataKey:et.fullName,validationRules:[{required:!0,message:"Please set the full name of this memeber."}]},t))),r.a.createElement($.a.Item,{label:"Avatar"},r.a.createElement(he,Object.assign({dataKey:et.avatar,isSingleImg:!0,endpoint:"/members"},t))),r.a.createElement(je,{label:"Title"},r.a.createElement(Ie,Object.assign({dataKey:et.title,validationRules:[{required:!0,message:"Please set the title of this member(e.g. professor, PhD, Master)."}]},t))),r.a.createElement(je,{label:"Email"},r.a.createElement(Ie,Object.assign({dataKey:et.email,validationRules:[{type:"email",message:"The input must be an email."},{required:!0,message:"Please set the email of this member."}]},t))),r.a.createElement($.a.Item,{label:"Focus on"},r.a.createElement(me,Object.assign({dataKey:et.focusOn},t))),r.a.createElement(je,{label:"Personal website"},r.a.createElement(Ie,Object.assign({dataKey:et.website,validationRules:[{type:"url",message:"The input must be an url."}]},t))),r.a.createElement(je,{label:"Graduate year"},r.a.createElement(Ie,Object.assign({dataKey:et.graduateYear,validationRules:[{validator:function(e,t){return!isNaN(t)},message:"Input must be a number"}]},t))),r.a.createElement(je,{label:"About"},r.a.createElement(ke,Object.assign({dataKey:et.about},t))),r.a.createElement($.a.Item,{label:"Publications"},r.a.createElement(We,Object.assign({dataKey:et.publications,fields:[{key:"title",inputParams:{placeholder:"title"},validationRules:[{required:!0,message:"Publication's title is required."}]},{key:"conference",inputParams:{placeholder:"conference"}},{key:"year",inputParams:{placeholder:"year"},validationRules:[{validator:function(e,t){return!isNaN(t)},message:"Input must be a number."}]},{key:"link",inputParams:{placeholder:"link"},validationRules:[{type:"url",message:"Input must be an url."}]}]},t))),r.a.createElement($.a.Item,{label:"Awards"},r.a.createElement(We,Object.assign({dataKey:et.awards,fields:[{key:"title",inputParams:{placeholder:"title"}},{key:"year",inputParams:{placeholder:"year"}}]},t))),r.a.createElement(Qe,null,r.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(i.b,{to:"/members/list"},r.a.createElement(h.a,{type:"danger"},"Back"))))}),Ze={name:"Members",path:"/members",iconType:"user",page:function(e){var t=e.match.url;return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"".concat(t,"/list"),component:ze}),r.a.createElement(o.b,{path:"".concat(t,"/:uuid/edit"),component:$e}),r.a.createElement(o.b,{path:"".concat(t,"/create"),component:$e}),r.a.createElement(o.a,{from:"*",to:"".concat(t,"/list")}))}},Xe=[{type:x.FIELD,key:"fullName",defaultValue:""},{type:x.FIELD,key:"title",defaultValue:""},{type:x.FIELD,key:"email",defaultValue:""},{type:x.MULTI_FIELDS,key:"focusOn",defaultValue:[],defaultKeys:[]},{type:x.FIELD,key:"website",defaultValue:""},{type:x.IMG,key:"avatar",defaultValue:[]},{type:x.FIELD,key:"about",defaultValue:""},{type:x.FIELD,key:"graduateYear",defaultValue:""},{type:x.MULTI_FIELDS,key:"publications",defaultValue:[],defaultKeys:[]},{type:x.MULTI_FIELDS,key:"awards",defaultValue:[],defaultKeys:[]}],et=Xe.reduce(function(e,t){return Object(I.a)({},e,Object(k.a)({},t.key,t.key))},{}),tt=function(){var e=G("/courses"),t=e.data,a=e.setData,c=e.isLoading,l=e.setIsLoading,u=Object(n.useCallback)(function(){var e=Object(L.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,_("/courses",t);case 4:a(function(e){return e.filter(function(e){return e.uuid!==t})}),T.a.success({message:"Remove Complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),T.a.error({message:"Remove Error!",description:"".concat(e.t0),duration:4});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),[l,a]),o=Object(n.useCallback)(function(e){return R()(e).local().format("YYYY/MM/DD HH:mm:ss")},[]),s=Object(n.useCallback)(function(e,t){return r.a.createElement("span",null,r.a.createElement(i.b,{to:"/courses/".concat(t.uuid,"/edit")},"Edit"),r.a.createElement(S.a,{type:"vertical"}),r.a.createElement(K.a,{title:"Are you sure to delete ?",onConfirm:function(){return u(t.uuid)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"javascript:;"},"Delete")))},[u]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/courses/create"},r.a.createElement(h.a,{type:"primary",style:{marginLeft:"15px",marginBottom:"15px"}},"Create")),r.a.createElement(V.a,{dataSource:t,loading:c,rowKey:function(e){return e.uuid}},r.a.createElement(V.a.Column,Object.assign({title:"Course ID",dataIndex:"courseID",key:"courseID"},J("courseID"))),r.a.createElement(V.a.Column,Object.assign({title:"Name",dataIndex:"name",key:"name"},J("name"))),r.a.createElement(V.a.Column,{title:"Location",dataIndex:"location",key:"location"}),r.a.createElement(V.a.Column,{title:"Last edit",dataIndex:"timestamp",key:"timestamp",render:o,sorter:function(e,t){return parseInt(e.timestamp)-parseInt(t.timestamp)}}),r.a.createElement(V.a.Column,{title:"Action",key:"action",render:s})))};function at(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return at=function(){return e},e}var nt=E.a.div(at()),rt=$.a.create()(function(e){var t=e.form,a=e.match,c=e.history,l=t.validateFields,u=De("/courses",a.params.uuid),o=u.data,s=void 0===o?{}:o,m=u.isLoading,d=void 0===m||m;Re(Object(I.a)({},t,{data:s,dataBindingConfs:lt}));var p=Object(n.useCallback)(function(e){e.preventDefault(),l(function(){var e=Object(L.a)(C.a.mark(function e(t,n){var r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=15;break}return console.log("Received values of form: ",n),e.prev=2,r=Te(n,lt),e.next=6,Fe(r,"/courses",a.params.uuid);case 6:T.a.success({message:"Create/Edit ".concat(n.name," complete!"),duration:4}),c.push("/courses/list"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),T.a.error({message:"Upload ".concat(n.name," error!"),description:"".concat(e.t0),duration:2});case 13:e.next=16;break;case 15:console.log("COURSE ON SUBMIT ERROR:",t);case 16:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t,a){return e.apply(this,arguments)}}())},[l,a.params.uuid,c]);return d?r.a.createElement(Le,null):r.a.createElement($.a,{onSubmit:p,labelCol:{span:3},wrapperCol:{span:12,offset:1}},r.a.createElement($.a.Item,{label:"UUID"},s.uuid?r.a.createElement("strong",null,s.uuid):""),r.a.createElement(je,{label:"Course ID"},r.a.createElement(Ie,Object.assign({dataKey:it.courseID,validationRules:[{required:!0,message:"Please set the course id of this course."}]},t))),r.a.createElement(je,{label:"Name"},r.a.createElement(Ie,Object.assign({dataKey:it.name,validationRules:[{required:!0,message:"Please set the name of this course."}]},t))),r.a.createElement(je,{label:"Credits"},r.a.createElement(Ie,Object.assign({dataKey:it.credits,validationRules:[{validator:function(e,t){return!isNaN(t)},message:"The input must be an number."},{required:!0,message:"Please set the credits of this course."}]},t))),r.a.createElement(je,{label:"Term And Year"},r.a.createElement(Ie,Object.assign({dataKey:it.termAndYear,validationRules:[{required:!0,message:"Please set the term and year of this course. e.g. 2019 Fall, Monday 3pm \u2013 5:50pm"}]},t))),r.a.createElement(je,{label:"Location"},r.a.createElement(Ie,Object.assign({dataKey:it.location,validationRules:[{required:!0,message:"Please set the location of this course."}]},t))),r.a.createElement($.a.Item,{label:"TAs"},r.a.createElement(We,Object.assign({dataKey:it.tas,fields:[{key:"name",inputParams:{placeholder:"TA's name"},validationRules:[{required:!0,message:"TA's name is required."}]},{key:"email",inputParams:{placeholder:"TA's email"},validationRules:[{required:!0,message:"TA's email is required."},{type:"email",message:"Input must be email."}]}]},t))),r.a.createElement(je,{label:"Office"},r.a.createElement(Ie,Object.assign({dataKey:it.office,validationRules:[{required:!0,message:"Please set the professor's office."}]},t))),r.a.createElement(je,{label:"Office hours"},r.a.createElement(Ie,Object.assign({dataKey:it.officeHours},t))),r.a.createElement(je,{label:"Email"},r.a.createElement(Ie,Object.assign({dataKey:it.email,validationRules:[{type:"email",message:"Input must be email."}]},t))),r.a.createElement($.a.Item,{label:"Descriptions"},r.a.createElement(me,Object.assign({dataKey:it.descriptions,isTextArea:!0},t))),r.a.createElement(je,{label:"Information link"},r.a.createElement(Ie,Object.assign({dataKey:it.link,validationRules:[{required:!0,message:"Please set the link to the nctu course information page."},{type:"url",message:"The input must be an url."}]},t))),r.a.createElement(nt,null,r.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(i.b,{to:"/courses/list"},r.a.createElement(h.a,{type:"danger"},"Back"))))}),ct={name:"Courses",path:"/courses",iconType:"book",page:function(e){var t=e.match.url;return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"".concat(t,"/list"),component:tt}),r.a.createElement(o.b,{path:"".concat(t,"/:uuid/edit"),component:rt}),r.a.createElement(o.b,{path:"".concat(t,"/create"),component:rt}),r.a.createElement(o.a,{from:"*",to:"".concat(t,"/list")}))}},lt=[{type:x.FIELD,key:"courseID",defaultValue:""},{type:x.FIELD,key:"name",defaultValue:""},{type:x.FIELD,key:"credits",defaultValue:""},{type:x.FIELD,key:"email",defaultValue:""},{type:x.FIELD,key:"termAndYear",defaultValue:""},{type:x.FIELD,key:"location",defaultValue:""},{type:x.MULTI_FIELDS,key:"tas",defaultValue:[],defaultKeys:[0]},{type:x.FIELD,key:"office",defaultValue:""},{type:x.FIELD,key:"officeHours",defaultValue:""},{type:x.MULTI_FIELDS,key:"descriptions",defaultValue:[],defaultKeys:[0]},{type:x.FIELD,key:"link",defaultValue:""}],it=lt.reduce(function(e,t){return Object(I.a)({},e,Object(k.a)({},t.key,t.key))},{});function ut(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return ut=function(){return e},e}var ot=E.a.div(ut()),st={name:"Contact",path:"/contact",iconType:"contacts",page:$.a.create()(function(e){var t=e.form,a=t.validateFields,c=De("/contact"),l=c.data,u=void 0===l?{}:l,o=c.isLoading,s=void 0===o||o;Re(Object(I.a)({},t,{data:u,dataBindingConfs:mt}));var m=Object(n.useCallback)(function(e){e.preventDefault(),a(function(){var e=Object(L.a)(C.a.mark(function e(t,a){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=13;break}return e.prev=1,n=Te(a,mt),e.next=5,Se(n,"/contact");case 5:T.a.success({message:"Create/Edit Contact complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),T.a.error({message:"Upload Contact error!",description:"".concat(e.t0),duration:2});case 11:e.next=14;break;case 13:console.log("Contact ON SUBMIT ERROR:",t);case 14:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,a){return e.apply(this,arguments)}}())},[a]);return s?r.a.createElement(Le,null):r.a.createElement($.a,{onSubmit:m,labelCol:{span:3},wrapperCol:{span:12,offset:1}},r.a.createElement(je,{label:"Name"},r.a.createElement(Ie,Object.assign({dataKey:dt.name,validationRules:[{required:!0,message:"Please set the name."}]},t))),r.a.createElement(je,{label:"Email"},r.a.createElement(Ie,Object.assign({dataKey:dt.email,validationRules:[{type:"email",message:"The input must be an email."},{required:!0,message:"Please set the email."}]},t))),r.a.createElement(je,{label:"Office"},r.a.createElement(Ie,Object.assign({dataKey:dt.office,validationRules:[{required:!0,message:"Please set the office."}]},t))),r.a.createElement(je,{label:"Office hours"},r.a.createElement(Ie,Object.assign({dataKey:dt.officeHours},t))),r.a.createElement(je,{label:"Lab"},r.a.createElement(Ie,Object.assign({dataKey:dt.lab,validationRules:[{required:!0,message:"Please set the lab location."}]},t))),r.a.createElement(je,{label:"Description"},r.a.createElement(Ie,Object.assign({dataKey:dt.description},t))),r.a.createElement($.a.Item,{label:"Banner"},r.a.createElement(he,Object.assign({dataKey:dt.banner,isSingleImg:!0,endpoint:"/contact"},t))),r.a.createElement(ot,null,r.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(i.b,{to:"/news/list"},r.a.createElement(h.a,{type:"danger"},"Back"))))})},mt=[{type:x.FIELD,key:"name",defaultValue:""},{type:x.FIELD,key:"email",defaultValue:""},{type:x.FIELD,key:"office",defaultValue:""},{type:x.FIELD,key:"officeHours",defaultValue:""},{type:x.FIELD,key:"lab",defaultValue:""},{type:x.FIELD,key:"description",defaultValue:""},{type:x.IMG,key:"banner",defaultValue:[]}],dt=mt.reduce(function(e,t){return Object(I.a)({},e,Object(k.a)({},t.key,t.key))},{});function pt(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return pt=function(){return e},e}var ft=E.a.div(pt()),bt={name:"Lab Introduction",path:"/labIntro",iconType:"crown",page:$.a.create()(function(e){var t=e.form,a=t.validateFields,c=De("/labIntro"),l=c.data,u=void 0===l?{}:l,o=c.isLoading,s=void 0===o||o;Re(Object(I.a)({},t,{data:u,dataBindingConfs:Et}));var m=Object(n.useCallback)(function(e){e.preventDefault(),a(function(){var e=Object(L.a)(C.a.mark(function e(t,a){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=13;break}return e.prev=1,n=Te(a,Et),e.next=5,Se(n,"/labIntro");case 5:T.a.success({message:"Create/Edit Lab Introduction complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),T.a.error({message:"Upload Lab Introduction error!",description:"".concat(e.t0),duration:2});case 11:e.next=14;break;case 13:console.log("LabIntro ON SUBMIT ERROR:",t);case 14:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,a){return e.apply(this,arguments)}}())},[a]);return s?r.a.createElement(Le,null):r.a.createElement($.a,{onSubmit:m,labelCol:{span:3},wrapperCol:{span:12,offset:1}},r.a.createElement(je,{label:"Title"},r.a.createElement(Ie,Object.assign({dataKey:yt.title,validationRules:[{required:!0,message:"Please set the title."}]},t))),r.a.createElement(je,{label:"subTitle"},r.a.createElement(Ie,Object.assign({dataKey:yt.subTitle},t))),r.a.createElement($.a.Item,{label:"Visions"},r.a.createElement(me,Object.assign({dataKey:yt.visions,limitedFieldNums:3},t))),r.a.createElement(ft,null,r.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(i.b,{to:"/news/list"},r.a.createElement(h.a,{type:"danger"},"Back"))))})},Et=[{type:x.FIELD,key:"title",defaultValue:""},{type:x.FIELD,key:"subTitle",defaultValue:""},{type:x.MULTI_FIELDS,key:"visions",defaultValue:[],defaultKeys:[]}],yt=Et.reduce(function(e,t){return Object(I.a)({},e,Object(k.a)({},t.key,t.key))},{}),vt=[Me,_e,Ze,ct,st,bt];function gt(){var e=Object(b.a)(["\n  text-align: center;\n"]);return gt=function(){return e},e}function ht(){var e=Object(b.a)(["\n  margin: 24px 16px 0;\n"]);return ht=function(){return e},e}function Ot(){var e=Object(b.a)(["\n  background: #fff;\n  padding: 0 20px;\n  text-align: end; \n"]);return Ot=function(){return e},e}function jt(){var e=Object(b.a)(["\n  min-width: 100vw;\n  min-height: 100vh;\n"]);return jt=function(){return e},e}function kt(){var e=Object(b.a)(["\n  &.active > span {\n    color: #fff;\n  }\n"]);return kt=function(){return e},e}var It=y.a.Header,xt=y.a.Content,wt=y.a.Footer,Ct=y.a.Sider,Lt=Object(E.a)(i.c)(kt()),Dt=Object(E.a)(y.a)(jt()),Rt=Object(E.a)(It)(Ot()),Tt=Object(E.a)(xt)(ht()),Ft=Object(E.a)(wt)(gt()),St=function(){var e=Object(n.useCallback)(function(){p.auth().signOut()},[]);return r.a.createElement(Dt,null,r.a.createElement(Ct,{breakpoint:"lg",collapsedWidth:"0"},r.a.createElement(j,null,"Cross Reality Lab"),r.a.createElement(v.b,{theme:"dark",mode:"inline",selectedKeys:[]},vt.map(function(e){var t=e.name,a=e.path,n=e.iconType;return r.a.createElement(v.b.Item,{key:t},r.a.createElement(Lt,{to:a,activeClassName:"active"},r.a.createElement(g.a,{type:n}),r.a.createElement("span",null,t)))}))),r.a.createElement(y.a,null,r.a.createElement(Rt,null,r.a.createElement(h.a,{type:"danger",onClick:e},"Sign out")),r.a.createElement(Tt,null,r.a.createElement(o.d,null,vt.map(function(e){var t=e.path,a=e.page;return r.a.createElement(o.b,{key:t,path:t,component:a})}),r.a.createElement(o.a,{to:"/projects"}))),r.a.createElement(Ft,null,"Cross Reality Lab Admin \xa92019")))};function Kt(){var e=Object(b.a)(["\n  width: 100%;\n  height: 100vh;\n  padding-top: 10%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  background-color: #eee;\n"]);return Kt=function(){return e},e}var Vt=E.a.div(Kt()),Pt=$.a.create()(function(e){var t=e.history,a=e.form,c=Object(n.useCallback)(function(){var e=Object(L.a)(C.a.mark(function e(n){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a.validateFields(function(){var e=Object(L.a)(C.a.mark(function e(a,n){var r,c;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=11;break}return r=n.account,c=n.password,e.prev=2,e.next=5,p.auth().signInWithEmailAndPassword(r,c);case 5:t.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),T.a.error({message:"Auth to server error",description:"".concat(e.t0),duration:2});case 11:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[t,a]);return Object(n.useContext)(f).currentUser?r.a.createElement(o.a,{to:"/"}):r.a.createElement(Vt,null,r.a.createElement("h1",null,"CR Lab"),r.a.createElement($.a,{onSubmit:c},r.a.createElement(je,null,r.a.createElement(Ie,Object.assign({dataKey:"account",validationRules:[{required:!0,message:"Please input your account."},{type:"email",message:"Account should be an email."}],inputProps:{prefix:r.a.createElement(g.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Account"}},a))),r.a.createElement(je,null,r.a.createElement(Ie,Object.assign({dataKey:"password",validationRules:[{required:!0,message:"Please input your password."}],inputProps:{prefix:r.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}},a))),r.a.createElement(h.a,{htmlType:"submit",style:{float:"right"}},"Log in")))}),Mt=function(e){var t=e.component,a=Object(u.a)(e,["component"]),c=Object(n.useContext)(f),l=c.currentUser,i=c.isLoading;return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return i?r.a.createElement("div",{style:{margin:"16px 0 0 16px"}}," Loading ... "):l?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/login"})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(i.a,null,r.a.createElement(function(e){var t=e.children,a=Object(n.useState)(!0),c=Object(s.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(null),o=Object(s.a)(u,2),m=o[0],d=o[1];return Object(n.useEffect)(function(){p.auth().onAuthStateChanged(function(e){d(e),i(!1)})},[]),r.a.createElement(f.Provider,{value:{currentUser:m,isLoading:l}},t)},null,r.a.createElement(function(){return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/login",component:Pt}),r.a.createElement(Mt,{path:"/",component:St}))},null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[232,1,2]]]);
//# sourceMappingURL=main.674aaa4f.chunk.js.map