(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{232:function(e,t,a){e.exports=a(455)},455:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),o=a.n(i),u=a(52),l=(a(237),a(230)),c=a(58),s=a(33),p=a(150),d=a.n(p);a(246);d.a.initializeApp({apiKey:"AIzaSyAHQoH0ZAhFrRRKj9alF4m6w3vSOfpbxQ8",authDomain:"crlab-admin.firebaseapp.com",databaseURL:"https://crlab-admin.firebaseio.com",projectId:"crlab-admin",storageBucket:"crlab-admin.appspot.com",messagingSenderId:"452369537329",appId:"1:452369537329:web:bc5f621ac26b863c"});var m=d.a,f=r.a.createContext(),b=a(20),y=a(21),v=a(458),h=a(157),E=a(10),g=a(34);function O(){var e=Object(b.a)(["\n  height: 32px;\n  margin: 16px;\n  text-align: center;\n  color: #fff;\n  font-size: 16px;\n"]);return O=function(){return e},e}var I=y.a.div(O()),T=a(28),j=a(57),P=a.n(j),x=a(465),F=a(16),L=a.n(F),w=a(27),D=a(461),k=a(464),R=a(53),C=a(32),K=a(463);function S(){var e=Object(b.a)(["\n  width: 60%;\n"]);return S=function(){return e},e}function V(){var e=Object(b.a)(["\n  margin-left: 10px;\n"]);return V=function(){return e},e}function A(){var e=Object(b.a)(["\n  width: 80%;\n"]);return A=function(){return e},e}function M(){var e=Object(b.a)(["\n  width: 80%;\n"]);return M=function(){return e},e}function U(){var e=Object(b.a)(["\n  margin-bottom: unset;\n"]);return U=function(){return e},e}function _(){var e=Object(b.a)(["\n  width: 150%;\n  margin-bottom: -20px;\n  z-index: 1;\n"]);return _=function(){return e},e}var N=Object(y.a)(D.a.Item).attrs(function(){return{wrapperCol:{span:20}}})(_()),q=Object(y.a)(D.a.Item).attrs(function(){return{wrapperCol:{span:12,offset:2}}})(U()),Y=Object(y.a)(K.a.TextArea)(M()),H=Object(y.a)(K.a)(A()),G=Object(y.a)(E.a).attrs(function(){return{type:"minus-circle-o"}})(V()),z=Object(y.a)(g.a).attrs(function(){return{type:"dashed"}})(S()),W=function(e){var t=e.dataKey,a=e.getFieldDecorator,i=e.getFieldValue,o=e.setFieldsValue,u=e.validationRules,l=void 0===u?[]:u,c=e.isTextArea,s=void 0!==c&&c,p=e.limitedFieldNums;a("".concat(t,"-idx"),{initialValue:[0]});var d=i("".concat(t,"-idx")),m=Object(n.useRef)(d.length),f=function(e){return function(){var a=i("".concat(t,"-idx"));1!==a.length&&o(Object(C.a)({},"".concat(t,"-idx"),a.filter(function(t){return t!==e})))}},b=Object(n.useCallback)(function(){var e=i("".concat(t,"-idx"));o(Object(C.a)({},"".concat(t,"-idx"),[].concat(Object(R.a)(e),[m.current]))),m.current=m.current+1},[i,o,t]);return r.a.createElement(r.a.Fragment,null,d.map(function(e){return r.a.createElement(N,{key:e},a("".concat(t,"[").concat(e,"]"),{rules:l})(s?r.a.createElement(Y,{autosize:!0}):r.a.createElement(H,null)),d.length>1&&r.a.createElement(G,{onClick:f(e)}))}),!(p&&d.length>=p)&&r.a.createElement(q,null,r.a.createElement(z,{onClick:b},r.a.createElement(E.a,{type:"plus"})," Add field")))},B=function(e){var t=e.dataKey,a=e.getFieldDecorator,i=e.getFieldValue,o=e.setFieldsValue,u=e.fields,l=void 0===u?[]:u;a("".concat(t,"-idx"),{initialValue:[]});var c=i("".concat(t,"-idx"));a(t,{initialValue:[]});var p=i(t),d=Object(n.useState)(!1),m=Object(s.a)(d,2),f=m[0],b=m[1],y=Object(n.useRef)(c.length),v=function(e){return function(){var a,n=i("".concat(t,"-idx")),r=Object(R.a)(p);r[e]=void 0,o((a={},Object(C.a)(a,"".concat(t,"-idx"),n.filter(function(t){return t!==e})),Object(C.a)(a,t,r),a))}},h=Object(n.useCallback)(function(){var e=i("".concat(t,"-idx"));o(Object(C.a)({},"".concat(t,"-idx"),[].concat(Object(R.a)(e),[y.current]))),y.current=y.current+1},[i,o,t]),g=function(e,a){return function(n){var r=Object(R.a)(p);r[e]?r[e][a]=n.target.value:r[e]=l.reduce(function(e,t){return t.key===a?Object(T.a)({},e,Object(C.a)({},t.key,n.target.value)):Object(T.a)({},e,Object(C.a)({},t.key,""))},{}),o(Object(C.a)({},t,r))}};return Object(n.useEffect)(function(){if(!f&&p.length>0){var e=p.reduce(function(e,a,n){var r=Object.entries(a).reduce(function(e,a){var r=Object(s.a)(a,2),i=r[0],o=r[1];return Object(T.a)({},e,Object(C.a)({},"".concat(t,"-").concat(i,"-").concat(n),o))},{});return Object(T.a)({},e,r)},{});o(e),b(!0)}!f&&c.length<1&&b(!0)},[f,p,c,t,o,b]),r.a.createElement(r.a.Fragment,null,c.map(function(e){return r.a.createElement(N,{key:e},l.map(function(n){var i=n.key,o=n.validationRules,u=n.inputParams,l=n.isTextArea;return r.a.createElement(D.a.Item,{key:i},l?a("".concat(t,"-").concat(i,"-").concat(e),{rules:o})(r.a.createElement(Y,Object.assign({onChange:g(e,i),autosize:!0},u))):a("".concat(t,"-").concat(i,"-").concat(e),{rules:o})(r.a.createElement(H,Object.assign({onChange:g(e,i)},u))))}),c.length>0&&r.a.createElement(G,{onClick:v(e)}))}),r.a.createElement(q,null,r.a.createElement(z,{onClick:h},r.a.createElement(E.a,{type:"plus"})," Add field")))},X=a(460),J=a(462),Q=a(116),$=a.n(Q),Z=m.database(),ee=m.storage(),te=function(e,t,a){return Z.ref("".concat(e,"/").concat(t)).set(a).then(function(){return console.log("CREATE ".concat(e," ").concat(t," COMPLETE"))}).catch(function(a){throw console.error("CREATE ".concat(e," ").concat(t," ERROR: ").concat(a)),a})},ae=function(e){return Z.ref(e).orderByChild("timestamp").once("value").then(function(e){return e.val()}).catch(function(t){throw console.error("GET ALL ".concat(e," ERROR"),t),t})},ne=function(e,t){var a=t?"".concat(e,"/").concat(t):e;return Z.ref(a).once("value").then(function(e){return e.val()}).catch(function(e){throw console.error("GET ".concat(a," ERROR: ").concat(e)),e})},re=function(e,t,a){var n=a?"".concat(e,"/").concat(a):e;return Z.ref(n).update(t).then(function(){return console.log("UPDATE ".concat(n," COMPLETE"))}).catch(function(e){throw console.error("UPDATE ".concat(n," ERROR: ").concat(e)),e})},ie=function(e,t){return Z.ref("".concat(e,"/").concat(t)).remove().then(function(){return console.log("REMOVE ".concat(e," ").concat(t," COMPLETE"))}).catch(function(a){throw console.error("REMOVE ".concat(e," ").concat(t," ERROR: ").concat(a)),a})},oe=function(){var e=Object(w.a)(L.a.mark(function e(t,a,n){var r,i,o,u;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.ref();case 2:return r=e.sent,i=r.child("".concat(t.substr(1),"/").concat(a)),e.prev=4,e.next=7,i.put(n);case 7:return o=e.sent,e.next=10,r.child("".concat(t.substr(1),"/").concat(a)).getDownloadURL();case 10:return u=e.sent,e.abrupt("return",{image:o,imageURL:u});case 14:throw e.prev=14,e.t0=e.catch(4),e.t0;case 17:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t,a,n){return e.apply(this,arguments)}}();function ue(){var e=Object(b.a)(["\n  width: 100%;\n"]);return ue=function(){return e},e}var le=y.a.img(ue()),ce=r.a.createElement("div",null,r.a.createElement(E.a,{type:"plus"}),r.a.createElement("div",null,"Drag or Click to upload")),se=function(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})},pe=function(e){var t=e.dataKey,a=e.getFieldDecorator,i=e.getFieldValue,o=e.setFieldsValue,u=e.endpoint,l=void 0===u?"":u,c=e.isSingleImg,p=void 0!==c&&c,d=e.withCaption,m=void 0!==d&&d;a(t,{initialValue:[]});var f=Object(n.useState)({previewVisible:!1,previewImage:""}),b=Object(s.a)(f,2),y=b[0],v=b[1],h=Object(n.useCallback)(function(){var e=Object(w.a)(L.a.mark(function e(a){var n,r,u,c,s,p,d,m,f;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.onError,r=a.onSuccess,u=a.file,e.prev=1,c=u.name,e.next=5,oe(l,c,u);case 5:s=e.sent,p=s.image,d=s.imageURL,m={uuid:$()(),file:Object(T.a)({},u,{name:c,url:d}),caption:""},f=i(t),o(Object(C.a)({},t,[].concat(Object(R.a)(f),[m]))),r(null,p),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),n(e.t0);case 17:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}(),[i,o,l,t]),E=Object(n.useCallback)(function(){return v(function(e){return Object(T.a)({},e,{previewVisible:!1})})},[v]),g=Object(n.useCallback)(function(){var e=Object(w.a)(L.a.mark(function e(t){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,se(t.originFileObj);case 3:t.preview=e.sent;case 4:v({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[v]),O=Object(n.useCallback)(function(e){return!("image/jpeg"!==e.type&&"image/png"!==e.type)||(k.a.error({message:"You can only upload png or jpg file.",duration:2}),!1)},[]),I=Object(n.useCallback)(function(e){var a=i(t).filter(function(t){return!(t.file.uid===e.uid)});o(Object(C.a)({},t,a))},[i,o,t]),j=Object(n.useCallback)(function(){var e=i(t);return e?e.reduce(function(e,t){return[].concat(Object(R.a)(e),[t.file])},[]):[]},[i,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,{name:"files",listType:"picture-card",defaultFileList:j(),customRequest:h,onPreview:g,onRemove:I,beforeUpload:O},!(p&&i(t)&&i(t).length>=1)&&ce),m&&i(t)&&i(t).map(function(e,a){return r.a.createElement(K.a,{key:"".concat(e.file.name,"-").concat(a),value:e.caption,onChange:(n=e.file.uid,function(e){var a=i(t).map(function(t){return t.file.uid===n?{uid:n,file:t.file,caption:e.target.value}:t});o(Object(C.a)({},t,a))})});var n}),r.a.createElement(J.a,{visible:y.previewVisible,footer:null,onCancel:E},r.a.createElement(le,{alt:"example",src:y.previewImage})))};function de(){var e=Object(b.a)(["\n  margin-bottom: 0;\n"]);return de=function(){return e},e}var me=Object(y.a)(D.a.Item)(de()),fe=function(e){var t=e.dataKey,a=e.validationRules,n=void 0===a?[]:a,i=e.inputProps,o=void 0===i?{}:i,u=e.getFieldDecorator;return r.a.createElement(D.a.Item,null,u(t,{rules:n})(r.a.createElement(K.a.TextArea,Object.assign({},o,{autosize:!0}))))},be=function(e){var t=e.dataKey,a=e.validationRules,n=void 0===a?[]:a,i=e.inputProps,o=void 0===i?{}:i,u=e.getFieldDecorator;return r.a.createElement(D.a.Item,null,u(t,{rules:n})(r.a.createElement(K.a,o)))},ye=a(222);function ve(){var e=Object(b.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  font-size: 24;\n"]);return ve=function(){return e},e}var he=Object(y.a)(E.a).attrs(function(){return{type:"loading",spin:!0}})(ve()),Ee=function(){return r.a.createElement(ye.a,{indicator:r.a.createElement(he,null)})},ge={IMG:Symbol("img"),IMGS_WITH_CAPTION:Symbol("imgs-with-caption"),FIELD:Symbol("field"),TEXTAREA:Symbol("textarea"),MULTI_FIELDS:Symbol("multi-fields"),MULTI_FIELDS_OF_FIELDS:Symbol("multi-fields-of-fields")},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={};return t.forEach(function(t){var n=t.inputType,r=t.inputProps.dataKey;a[r]=n===ge.IMGS_WITH_CAPTION?e[r].map(function(e){return{name:e.file.name,url:e.file.url,caption:e.caption}}):n===ge.IMG?e[r].map(function(e){return{name:e.file.name,url:e.file.url}}):n===ge.MULTI_FIELDS||n===ge.MULTI_FIELDS_OF_FIELDS?e[r]?e[r].filter(function(e){return!!e}):[]:e[r]?e[r]:""}),a},Ie=function(){var e=Object(w.a)(L.a.mark(function e(t,a){var n,r=arguments;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>2&&void 0!==r[2]?r[2]:"",e.prev=1,!n){e.next=9;break}return t.uuid=n,t.timestamp=Date.now(),e.next=7,re(a,t,n);case 7:e.next=14;break;case 9:return t.uuid=$()(),t.createdTimestamp=Date.now(),t.timestamp=t.createdTimestamp,e.next=14,te(a,t.uuid,t);case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(1),console.log("e:",e.t0),e.t0;case 20:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t,a){return e.apply(this,arguments)}}(),Te=function(){var e=Object(w.a)(L.a.mark(function e(t,a){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.createdTimestamp=Date.now(),t.timestamp=t.createdTimestamp,e.next=5,re(a,t);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}();function je(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return je=function(){return e},e}var Pe=y.a.div(je()),xe=D.a.create()(Object(c.g)(function(e){var t=e.form,a=e.match,i=e.history,o=e.formFields,l=e.withUUID,c=e.routePath,p=e.endpoint,d=t.validateFields,m=a.path.includes("contact")||a.path.includes("labIntro"),f=m?[p]:[p,a.params.uuid],b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=Object(n.useState)(!0),r=Object(s.a)(a,2),i=r[0],o=r[1],u=Object(n.useState)({}),l=Object(s.a)(u,2),c=l[0],p=l[1],d=arguments.length;return Object(n.useEffect)(function(){t||1===d?function(){var a=Object(w.a)(L.a.mark(function a(){var n;return L.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o(!0),a.prev=1,a.next=4,ne(e,t);case 4:(n=a.sent)&&p(n),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log("FETCH ".concat(t," AT ").concat(e," ERROR"),a.t0);case 11:return a.prev=11,o(!1),a.finish(11);case 14:case"end":return a.stop()}},a,null,[[1,8,11,14]])}));return function(){return a.apply(this,arguments)}}()():o(!1)},[e,t]),{data:c,isLoading:i}}.apply(void 0,f),y=b.data,v=void 0===y?{}:y,h=b.isLoading,E=void 0===h||h;!function(e){var t=e.data,a=e.formFields,r=e.getFieldDecorator,i=e.setFieldsValue,o=Object(n.useCallback)(function(){a.forEach(function(e){var t=e.inputType,a=e.inputProps.dataKey;r(t===ge.MULTI_FIELDS||t===ge.MULTI_FIELDS_OF_FIELDS?"".concat(a,"-idx"):a)})},[a,r]),u=Object(n.useCallback)(function(e){var t={},n={};a.forEach(function(a){var r=a.inputProps.dataKey,i=a.inputType,o=a.defaultValue,u=a.defaultKeys;if(i===ge.IMGS_WITH_CAPTION){var l=e[r]?e[r].map(function(e,t){return{file:{uid:"img-".concat(t),name:e.name,status:"done",url:e.url},caption:e.caption}}):o;t[r]=l}else if(i===ge.IMG){var c=e[r]?[{file:{uid:"singleImg",name:e[r][0].name,status:"done",url:e[r][0].url},caption:""}]:o;t[r]=c}else if(i===ge.MULTI_FIELDS||i===ge.MULTI_FIELDS_OF_FIELDS){var s=e[r]?Object(R.a)(Array(e[r].length)).map(function(e,t){return t}):u;t["".concat(r,"-idx")]=s,n[r]=e[r]?e[r]:o}else t[r]=e[r]?e[r]:o}),i(t),setTimeout(function(){return i(n)},0)},[a,i]);Object(n.useEffect)(function(){o()},[o]),Object(n.useEffect)(function(){Object.keys(t).length>0&&u(t)},[t,u])}(Object(T.a)({},t,{data:v,formFields:o}));var O=Object(n.useCallback)(function(e){e.preventDefault(),d(function(){var e=Object(w.a)(L.a.mark(function e(t,n){var r,u;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=15;break}return e.prev=1,r=Oe(n,o),u=m?Te:Ie,e.next=6,u(r,p,a.params.uuid);case 6:k.a.success({message:"Create/Edit ".concat(n.title," complete!"),duration:4}),i.push("".concat(c,"/list")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),k.a.error({message:"Upload ".concat(n.title," error!"),description:"".concat(e.t0),duration:2});case 13:e.next=16;break;case 15:console.log("PROJECT ON SUBMIT ERROR:",t);case 16:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t,a){return e.apply(this,arguments)}}())},[d,a.params.uuid,i,o,c,p]);return E?r.a.createElement(Ee,null):r.a.createElement(D.a,{onSubmit:O,labelCol:{span:3},wrapperCol:{span:12,offset:1}},l&&r.a.createElement(D.a.Item,{label:"UUID"},v.uuid?r.a.createElement("strong",null,v.uuid):""),o.map(function(e,a){var n=e.inputType===ge.FIELD?me:D.a.Item,i=function(e){return e===ge.FIELD?be:e===ge.TEXTAREA?fe:e===ge.IMG||e===ge.IMGS_WITH_CAPTION?pe:e===ge.MULTI_FIELDS?W:e===ge.MULTI_FIELDS_OF_FIELDS?B:void 0}(e.inputType);return r.a.createElement(n,{key:a,label:e.label},r.a.createElement(i,Object.assign({},e.inputProps,t)))}),r.a.createElement(Pe,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(u.b,{to:"".concat(c,"/list")},r.a.createElement(g.a,{type:"danger"},"Back"))))})),Fe=a(456),Le=a(457),we=a(459),De=a(224),ke=a.n(De),Re=function(e){var t=e.listColumns,a=e.withActionColumn,i=e.endpoint,o=e.routePath,l=function(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2),r=a[0],i=a[1],o=Object(n.useState)([]),u=Object(s.a)(o,2),l=u[0],c=u[1];return Object(n.useEffect)(function(){!function(){var t=Object(w.a)(L.a.mark(function t(){var a;return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.prev=1,t.next=4,ae(e);case 4:a=t.sent,c(ke.a.values(a)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("FETCH ".concat(e," LIST ERROR"),t.t0);case 11:return t.prev=11,i(!1),t.finish(11);case 14:case"end":return t.stop()}},t,null,[[1,8,11,14]])}));return function(){return t.apply(this,arguments)}}()()},[e]),{isLoading:r,setIsLoading:i,setData:c,data:l}}(i),c=l.data,p=l.setData,d=l.isLoading,m=l.setIsLoading,f=Object(n.useCallback)(function(){var e=Object(w.a)(L.a.mark(function e(t){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,ie(i,t);case 4:p(function(e){return e.filter(function(e){return e.uuid!==t})}),k.a.success({message:"Remove Complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),k.a.error({message:"Remove Error!",description:"".concat(e.t0),duration:4});case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),[m,p,i]),b=Object(n.useCallback)(function(e,t){return r.a.createElement("span",null,r.a.createElement(u.b,{to:"".concat(o,"/").concat(t.uuid,"/edit")},"Edit"),r.a.createElement(Fe.a,{type:"vertical"}),r.a.createElement(Le.a,{title:"Are you sure to delete ?",onConfirm:function(){return f(t.uuid)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"javascript:;"},"Delete")))},[f,o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"".concat(o,"/create")},r.a.createElement(g.a,{type:"primary",style:{marginLeft:"15px",marginBottom:"15px"}},"Create")),r.a.createElement(we.a,{dataSource:c,loading:d,rowKey:function(e){return e.uuid}},t.map(function(e){var t=e.title,a=e.dataIndex,n=e.key,i=e.options;return r.a.createElement(we.a.Column,Object.assign({key:n,title:t,dataIndex:a},i))}),a&&r.a.createElement(we.a.Column,{title:"Action",key:"action",render:b})))},Ce=r.a.forwardRef(function(e,t){var a=e.setSelectedKeys,i=e.confirm,o=e.clearFilters,u=e.dataIndex,l=Object(n.useState)(""),c=Object(s.a)(l,2),p=c[0],d=c[1],m=function(){i()};return r.a.createElement("div",{style:{padding:8}},r.a.createElement(K.a,{ref:t,value:p,placeholder:"Search ".concat(u),onChange:function(e){d(e.target.value),a(e.target.value?[e.target.value]:[])},onPressEnter:m,style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(g.a,{type:"primary",onClick:m,icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),r.a.createElement(g.a,{onClick:function(){d(""),o()},size:"small",style:{width:90}},"Reset"))}),Ke=function(e){var t=r.a.createRef(null);return{filterDropdown:function(a){return r.a.createElement(Ce,Object.assign({ref:t,dataIndex:e},a))},filterIcon:function(e){return r.a.createElement(E.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return t.current.select()})}}},Se=[{inputType:ge.FIELD,label:"Show title",defaultValue:"",inputProps:{dataKey:"showTitle",validationRules:[{required:!0,message:"Please set the show title which will show on the enter image of this project."}]}},{inputType:ge.FIELD,label:"Title",defaultValue:"",inputProps:{dataKey:"title",validationRules:[{required:!0,message:"Please set the title of this project."}]}},{inputType:ge.FIELD,label:"Year",defaultValue:"",inputProps:{dataKey:"year",validationRules:[{validator:function(e,t){return!isNaN(t)},message:"The input must be a number."},{required:!0,message:"Please set the starting year of this project."}]}},{inputType:ge.MULTI_FIELDS,label:"Authors",defaultValue:[],defaultKeys:[0],inputProps:{dataKey:"authors",validationRules:[{required:!0,message:"Please set at least one author of this project, and remove unuse feild."}]}},{inputType:ge.IMG,label:"Cover",defaultValue:[],inputProps:{dataKey:"cover",title:"Cover",isSingleImg:!0,endpoint:"/projects"}},{inputType:ge.IMGS_WITH_CAPTION,label:"Images",defaultValue:[],inputProps:{dataKey:"imgs",withCaption:!0,endpoint:"/projects"}},{inputType:ge.MULTI_FIELDS,label:"Video links",defaultValue:[],defaultKeys:[],inputProps:{dataKey:"videos",validationRules:[{type:"url",message:"Input must be a link."}]}},{inputType:ge.TEXTAREA,label:"Abstract",defaultValue:"",inputProps:{dataKey:"abstract",validationRules:[{required:!0,message:"Please set the abstract of this project."}]}},{inputType:ge.MULTI_FIELDS,label:"Descriptions",defaultValue:[],defaultKeys:[0],inputProps:{dataKey:"descriptions",validationRules:[{required:!0,message:"Please set at least one description section of this project, and remove unuse feild."}],isTextArea:!0}},{inputType:ge.MULTI_FIELDS,label:"Tags",defaultValue:[],defaultKeys:[],inputProps:{dataKey:"tags"}},{inputType:ge.FIELD,label:"Publication on",defaultValue:"",inputProps:{dataKey:"publicationOn"}},{inputType:ge.FIELD,label:"Accepted year",defaultValue:"",inputProps:{dataKey:"acceptedYear",validationRules:[{validator:function(e,t){return void 0===t||!isNaN(t)},message:"Input must be a number."}]}},{inputType:ge.FIELD,label:"PDF link",defaultValue:"",inputProps:{dataKey:"pdf",validationRules:[{type:"url",message:"Input must be a link."}]}},{inputType:ge.FIELD,label:"DOI link",defaultValue:"",inputProps:{dataKey:"doi",validationRules:[{type:"url",message:"Input must be a link."}]}}],Ve={tabName:"Projects",routePath:"/projects",endpoint:"/projects",iconType:"project",routes:[{path:"/list",routeOptions:{exact:!0},component:Re,props:{listColumns:[{title:"Title",dataIndex:"title",key:"title",options:Object(T.a)({},Ke("title"))},{title:"Year",dataIndex:"year",key:"year",options:{sorter:function(e,t){return parseInt(e.year)-parseInt(t.year)}}},{title:"Tags",dataIndex:"tags",key:"tags",options:{render:function(e){return e&&r.a.createElement("span",null,e.map(function(e){return r.a.createElement(x.a,{color:"volcano",key:e},e.toUpperCase())}))}}},{title:"Last edit",dataIndex:"timestamp",key:"timestamp",options:{render:function(e){return P()(e).local().format("YYYY/MM/DD HH:mm:ss")}}}],withActionColumn:!0}},{path:"/:uuid/edit",routeOptions:{},component:xe,props:{formFields:Se,withUUID:!0}},{path:"/create",routeOptions:{},component:xe,props:{formFields:Se}}]},Ae=[{inputType:ge.FIELD,label:"Title",defaultValue:"",inputProps:{dataKey:"title",validationRules:[{required:!0,message:"Please set the title of this project."}]}},{inputType:ge.FIELD,label:"Date",defaultValue:"",inputProps:{dataKey:"date",validationRules:[{validator:function(e,t){return/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(t)},message:"Input must be format as YYYY-MM-DD."},{required:!0,message:"Please set the date of this news(YYYY-MM-DD)."}]}}],Me={tabName:"News",routePath:"/news",endpoint:"/news",iconType:"alert",routes:[{path:"/list",routeOptions:{exact:!0},component:Re,props:{listColumns:[{title:"Title",dataIndex:"title",key:"title",options:Object(T.a)({},Ke("title"))},{title:"Date",dataIndex:"date",key:"date",options:{sorter:function(e,t){return P()(e.date).unix()-P()(t.date).unix()}}},{title:"Last edit",dataIndex:"timestamp",key:"timestamp",options:{render:function(e){return P()(e).local().format("YYYY/MM/DD HH:mm:ss")}}}],withActionColumn:!0}},{path:"/:uuid/edit",routeOptions:{},component:xe,props:{formFields:Ae,withUUID:!0}},{path:"/create",routeOptions:{},component:xe,props:{formFields:Ae}}]},Ue=[{inputType:ge.FIELD,label:"Full name",defaultValue:"",inputProps:{dataKey:"fullName",validationRules:[{required:!0,message:"Please set the full name of this memeber."}]}},{inputType:ge.IMG,label:"Avatar",defaultValue:"",inputProps:{dataKey:"avatar",isSingleImg:!0,endpoint:"/members"}},{inputType:ge.FIELD,label:"Title",defaultValue:"",inputProps:{dataKey:"title",validationRules:[{required:!0,message:"Please set the title of this member(e.g. professor, PhD, Master)."}]}},{inputType:ge.FIELD,label:"Email",defaultValue:"",inputProps:{dataKey:"email",validationRules:[{type:"email",message:"The input must be an email."},{required:!0,message:"Please set the email of this member."}]}},{inputType:ge.MULTI_FIELDS,label:"Focus on",defaultValue:[],defaultKeys:[],inputProps:{dataKey:"focusOn"}},{inputType:ge.FIELD,label:"Personal website",defaultValue:"",inputProps:{dataKey:"website",validationRules:[{type:"url",message:"The input must be an url."}]}},{inputType:ge.TEXTAREA,label:"About",defaultValue:"",inputProps:{dataKey:"about",isTextArea:!0}},{inputType:ge.FIELD,label:"Graduate year",defaultValue:"",inputProps:{dataKey:"graduateYear",validationRules:[{validator:function(e,t){return!isNaN(t)},message:"Input must be a number"}]}},{inputType:ge.MULTI_FIELDS_OF_FIELDS,label:"Publications",defaultValue:[],defaultKeys:[],inputProps:{dataKey:"publications",fields:[{key:"title",inputParams:{placeholder:"title"},validationRules:[{required:!0,message:"Publication's title is required."}]},{key:"conference",inputParams:{placeholder:"conference"}},{key:"year",inputParams:{placeholder:"year"},validationRules:[{validator:function(e,t){return!isNaN(t)},message:"Input must be a number."}]},{key:"link",inputParams:{placeholder:"link"},validationRules:[{type:"url",message:"Input must be an url."}]}]}},{inputType:ge.MULTI_FIELDS_OF_FIELDS,label:"Awards",defaultValue:[],defaultKeys:[],inputProps:{dataKey:"awards",fields:[{key:"title",inputParams:{placeholder:"title"}},{key:"year",inputParams:{placeholder:"year"}}]}}],_e={tabName:"Members",routePath:"/members",endpoint:"/members",iconType:"user",routes:[{path:"/list",routeOptions:{exact:!0},component:Re,props:{listColumns:[{title:"Name",dataIndex:"fullName",key:"fullName",options:Object(T.a)({},Ke("fullName"))},{title:"Title",dataIndex:"title",key:"title",options:Object(T.a)({},Ke("title"))},{title:"Last edit",dataIndex:"timestamp",key:"timestamp",options:{render:function(e){return P()(e).local().format("YYYY/MM/DD HH:mm:ss")}}}],withActionColumn:!0}},{path:"/:uuid/edit",routeOptions:{},component:xe,props:{formFields:Ue,withUUID:!0}},{path:"/create",routeOptions:{},component:xe,props:{formFields:Ue}}]},Ne=[{inputType:ge.FIELD,label:"Course ID",defaultValue:"",inputProps:{dataKey:"courseID",validationRules:[{required:!0,message:"Please set the course id of this course."}]}},{inputType:ge.FIELD,label:"Name",defaultValue:"",inputProps:{dataKey:"name",validationRules:[{required:!0,message:"Please set the name of this course."}]}},{inputType:ge.FIELD,label:"Credits",defaultValue:"",inputProps:{dataKey:"credits",validationRules:[{validator:function(e,t){return!isNaN(t)},message:"The input must be an number."},{required:!0,message:"Please set the credits of this course."}]}},{inputType:ge.FIELD,label:"Email",defaultValue:"",inputProps:{dataKey:"email",validationRules:[{type:"email",message:"Input must be email."}]}},{inputType:ge.FIELD,label:"Term And Year",defaultValue:"",inputProps:{dataKey:"termAndYear",validationRules:[{required:!0,message:"Please set the term and year of this course. e.g. 2019 Fall, Monday 3pm \u2013 5:50pm"}]}},{inputType:ge.FIELD,label:"Location",defaultValue:"",inputProps:{dataKey:"location",validationRules:[{required:!0,message:"Please set the location of this course."}]}},{inputType:ge.MULTI_FIELDS_OF_FIELDS,label:"TAs",defaultValue:[],defaultKeys:[0],inputProps:{dataKey:"tas",fields:[{key:"name",inputParams:{placeholder:"TA's name"},validationRules:[{required:!0,message:"TA's name is required."}]},{key:"email",inputParams:{placeholder:"TA's email"},validationRules:[{required:!0,message:"TA's email is required."},{type:"email",message:"Input must be email."}]}]}},{inputType:ge.FIELD,label:"Office",defaultValue:"",inputProps:{dataKey:"office",validationRules:[{required:!0,message:"Please set the professor's office."}]}},{inputType:ge.FIELD,label:"Office hours",defaultValue:"",inputProps:{dataKey:"officeHours"}},{inputType:ge.MULTI_FIELDS,label:"Descriptions",defaultValue:[],defaultKeys:[0],inputProps:{dataKey:"descriptions",isTextArea:!0}},{inputType:ge.FIELD,label:"Information link",defaultValue:"",inputProps:{dataKey:"link",validationRules:[{required:!0,message:"Please set the link to the nctu course information page."},{type:"url",message:"Input must be a link."}]}}],qe=[Ve,Me,_e,{tabName:"Courses",routePath:"/courses",endpoint:"/courses",iconType:"book",routes:[{path:"/list",routeOptions:{exact:!0},component:Re,props:{listColumns:[{title:"Course ID",dataIndex:"courseID",key:"courseID",options:Object(T.a)({},Ke("courseID"))},{title:"Name",dataIndex:"name",key:"name",options:Object(T.a)({},Ke("name"))},{title:"Location",dataIndex:"location",key:"location",options:{}},{title:"Last edit",dataIndex:"timestamp",key:"timestamp",options:{render:function(e){return P()(e).local().format("YYYY/MM/DD HH:mm:ss")}}}],withActionColumn:!0}},{path:"/:uuid/edit",routeOptions:{},component:xe,props:{formFields:Ne,withUUID:!0}},{path:"/create",routeOptions:{},component:xe,props:{formFields:Ne}}]},{tabName:"Contact",routePath:"/contact",endpoint:"/contact",iconType:"contacts",routes:[{path:"/",routeOptions:{},component:xe,props:{formFields:[{inputType:ge.FIELD,label:"Name",defaultValue:"",inputProps:{dataKey:"name",validationRules:[{required:!0,message:"Please set the name."}]}},{inputType:ge.FIELD,label:"Email",defaultValue:"",inputProps:{dataKey:"email",validationRules:[{type:"email",message:"The input must be an email."},{required:!0,message:"Please set the email."}]}},{inputType:ge.FIELD,label:"Office",defaultValue:"",inputProps:{dataKey:"office",validationRules:[{required:!0,message:"Please set the office."}]}},{inputType:ge.FIELD,label:"Office hours",defaultValue:"",inputProps:{dataKey:"officeHours"}},{inputType:ge.FIELD,label:"Lab",defaultValue:"",inputProps:{dataKey:"lab",validationRules:[{required:!0,message:"Please set the lab location."}]}},{inputType:ge.TEXTAREA,label:"Description",defaultValue:"",inputProps:{dataKey:"description"}},{inputType:ge.IMG,label:"banner",defaultValue:[],inputProps:{dataKey:"banner",isSingleImg:!0,endpoint:"/contact"}}]}}]},{tabName:"Lab Introduction",routePath:"/labIntro",endpoint:"/labIntro",iconType:"crown",routes:[{path:"/",routeOptions:{},component:xe,props:{formFields:[{inputType:ge.FIELD,label:"Title",defaultValue:"",inputProps:{dataKey:"title",validationRules:[{required:!0,message:"Please set the title."}]}},{inputType:ge.FIELD,label:"SubTitle",defaultValue:"",inputProps:{dataKey:"subTitle"}},{inputType:ge.MULTI_FIELDS,label:"Visions",defaultValue:[],defaultKeys:[],inputProps:{dataKey:"visions",limitedFieldNums:3}}]}}]}],Ye=function(e){var t=e.routePath,a=e.endpoint,n=e.routes;return r.a.createElement(c.d,null,n.map(function(e){var n=e.path,i=e.routeOptions,o=e.component,u=e.props,l=o;return r.a.createElement(c.b,Object.assign({key:n,path:"".concat(t).concat(n),render:function(){return r.a.createElement(l,Object.assign({routePath:t,endpoint:a},u))}},i))}),r.a.createElement(c.a,{from:"*",to:"".concat(t).concat(n[0].path)}))};function He(){var e=Object(b.a)(["\n  text-align: center;\n"]);return He=function(){return e},e}function Ge(){var e=Object(b.a)(["\n  margin: 24px 16px 0;\n"]);return Ge=function(){return e},e}function ze(){var e=Object(b.a)(["\n  background: #fff;\n  padding: 0 20px;\n  text-align: end;\n"]);return ze=function(){return e},e}function We(){var e=Object(b.a)(["\n  min-width: 100vw;\n  min-height: 100vh;\n"]);return We=function(){return e},e}function Be(){var e=Object(b.a)(["\n  &.active > span {\n    color: #fff;\n  }\n"]);return Be=function(){return e},e}var Xe=v.a.Header,Je=v.a.Content,Qe=v.a.Footer,$e=v.a.Sider,Ze=Object(y.a)(u.c)(Be()),et=Object(y.a)(v.a)(We()),tt=Object(y.a)(Xe)(ze()),at=Object(y.a)(Je)(Ge()),nt=Object(y.a)(Qe)(He()),rt=function(){var e=Object(n.useCallback)(function(){m.auth().signOut()},[]);return r.a.createElement(et,null,r.a.createElement($e,{breakpoint:"lg",collapsedWidth:"0"},r.a.createElement(I,null,"Cross Reality Lab"),r.a.createElement(h.b,{theme:"dark",mode:"inline",selectedKeys:[]},qe.map(function(e){var t=e.tabName,a=e.routePath,n=e.iconType;return r.a.createElement(h.b.Item,{key:t},r.a.createElement(Ze,{to:a,activeClassName:"active"},r.a.createElement(E.a,{type:n}),r.a.createElement("span",null,t)))}))),r.a.createElement(v.a,null,r.a.createElement(tt,null,r.a.createElement(g.a,{type:"danger",onClick:e},"Sign out")),r.a.createElement(at,null,r.a.createElement(c.d,null,qe.map(function(e){var t=e.tabName,a=e.routePath,n=e.endpoint,i=e.routes;return r.a.createElement(c.b,{key:t,path:a,render:function(){return r.a.createElement(Ye,{routePath:a,endpoint:n,routes:i})}})}),r.a.createElement(c.a,{to:"/projects"}))),r.a.createElement(nt,null,"Cross Reality Lab Admin \xa92019")))};function it(){var e=Object(b.a)(["\n  width: 100%;\n  height: 100vh;\n  padding-top: 10%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  background-color: #eee;\n"]);return it=function(){return e},e}var ot=y.a.div(it()),ut=D.a.create()(function(e){var t=e.history,a=e.form,i=Object(n.useCallback)(function(){var e=Object(w.a)(L.a.mark(function e(n){return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a.validateFields(function(){var e=Object(w.a)(L.a.mark(function e(a,n){var r,i;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=11;break}return r=n.account,i=n.password,e.prev=2,e.next=5,m.auth().signInWithEmailAndPassword(r,i);case 5:t.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),k.a.error({message:"Auth to server error",description:"".concat(e.t0),duration:2});case 11:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[t,a]);return Object(n.useContext)(f).currentUser?r.a.createElement(c.a,{to:"/"}):r.a.createElement(ot,null,r.a.createElement("h1",null,"CR Lab"),r.a.createElement(D.a,{onSubmit:i},r.a.createElement(me,null,r.a.createElement(be,Object.assign({dataKey:"account",validationRules:[{required:!0,message:"Please input your account."},{type:"email",message:"Account should be an email."}],inputProps:{prefix:r.a.createElement(E.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Account"}},a))),r.a.createElement(me,null,r.a.createElement(be,Object.assign({dataKey:"password",validationRules:[{required:!0,message:"Please input your password."}],inputProps:{prefix:r.a.createElement(E.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}},a))),r.a.createElement(g.a,{htmlType:"submit",style:{float:"right"}},"Log in")))}),lt=function(e){var t=e.component,a=Object(l.a)(e,["component"]),i=Object(n.useContext)(f),o=i.currentUser,u=i.isLoading;return r.a.createElement(c.b,Object.assign({},a,{render:function(e){return u?r.a.createElement("div",{style:{margin:"16px 0 0 16px"}}," Loading ... "):o?r.a.createElement(t,e):r.a.createElement(c.a,{to:"/login"})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(u.a,null,r.a.createElement(function(e){var t=e.children,a=Object(n.useState)(!0),i=Object(s.a)(a,2),o=i[0],u=i[1],l=Object(n.useState)(null),c=Object(s.a)(l,2),p=c[0],d=c[1];return Object(n.useEffect)(function(){m.auth().onAuthStateChanged(function(e){d(e),u(!1)})},[]),r.a.createElement(f.Provider,{value:{currentUser:p,isLoading:o}},t)},null,r.a.createElement(function(){return r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/login",component:ut}),r.a.createElement(lt,{path:"/",component:rt}))},null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[232,1,2]]]);
//# sourceMappingURL=main.5db9d74e.chunk.js.map