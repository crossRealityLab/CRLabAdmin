(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{232:function(e,t,a){e.exports=a(455)},455:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),i=a.n(c),l=a(19),u=(a(237),a(230)),o=a(59),s=a(17),m=a(151),p=a.n(m);a(246);p.a.initializeApp({apiKey:"AIzaSyAHQoH0ZAhFrRRKj9alF4m6w3vSOfpbxQ8",authDomain:"crlab-admin.firebaseapp.com",databaseURL:"https://crlab-admin.firebaseio.com",projectId:"crlab-admin",storageBucket:"crlab-admin.appspot.com",messagingSenderId:"452369537329",appId:"1:452369537329:web:bc5f621ac26b863c"});var f=p.a,d=r.a.createContext(),b=a(29),v=a(30),E=a(458),y=a(158),h=a(10),g=a(36);function j(){var e=Object(b.a)(["\n  height: 32px;\n  margin: 16px;\n  text-align: center;\n  color: #fff;\n  font-size: 16px;\n"]);return j=function(){return e},e}var O=v.a.div(j()),k=a(11),x=a.n(k),w=a(16),C=a(58),R=a.n(C),I=a(464),K=a(456),T=a(457),D=a(459),V=a(68),S=a.n(V),P=a(463),L=r.a.forwardRef(function(e,t){var a=e.setSelectedKeys,c=e.confirm,i=e.clearFilters,l=e.dataIndex,u=Object(n.useState)(""),o=Object(s.a)(u,2),m=o[0],p=o[1],f=function(){c()};return r.a.createElement("div",{style:{padding:8}},r.a.createElement(P.a,{ref:t,value:m,placeholder:"Search ".concat(l),onChange:function(e){p(e.target.value),a(e.target.value?[e.target.value]:[])},onPressEnter:f,style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(g.a,{type:"primary",onClick:f,icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),r.a.createElement(g.a,{onClick:function(){p(""),i()},size:"small",style:{width:90}},"Reset"))}),A=function(e){var t=Object(n.useRef)(null);return{filterDropdown:function(a){return r.a.createElement(L,Object.assign({ref:t,dataIndex:e},a))},filterIcon:function(e){return r.a.createElement(h.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return t.current.select()})}}},F=f.database(),Y=f.storage(),N=function(e,t,a){return F.ref("".concat(e,"/").concat(t)).set(a).then(function(){return console.log("CREATE ".concat(e," ").concat(t," COMPLETE"))}).catch(function(a){throw console.error("CREATE ".concat(e," ").concat(t," ERROR: ").concat(a)),a})},q=function(e){return F.ref(e).orderByChild("timestamp").once("value").then(function(e){return e.val()}).catch(function(t){throw console.error("GET ALL ".concat(e," ERROR"),t),t})},M=function(e,t){return F.ref("".concat(e,"/").concat(t)).once("value").then(function(e){return e.val()}).catch(function(a){throw console.error("GET ".concat(e," ").concat(t," ERROR: ").concat(a)),a})},U=function(e,t,a){return F.ref("".concat(e,"/").concat(t)).update(a).then(function(){return console.log("UPDATE ".concat(e," ").concat(t," COMPLETE"))}).catch(function(a){throw console.error("UPDATE ".concat(e," ").concat(t," ERROR: ").concat(a)),a})},B=function(e,t){return F.ref("".concat(e,"/").concat(t)).remove().then(function(){return console.log("REMOVE ".concat(e," ").concat(t," COMPLETE"))}).catch(function(a){throw console.error("REMOVE ".concat(e," ").concat(t," ERROR: ").concat(a)),a})},H=function(){var e=Object(w.a)(x.a.mark(function e(t,a,n){var r,c,i,l;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.ref();case 2:return r=e.sent,c=r.child("".concat(t.substr(1),"/").concat(a)),e.prev=4,e.next=7,c.put(n);case 7:return i=e.sent,e.next=10,r.child("".concat(t.substr(1),"/").concat(a)).getDownloadURL();case 10:return l=e.sent,e.abrupt("return",{image:i,imageURL:l});case 14:throw e.prev=14,e.t0=e.catch(4),e.t0;case 17:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t,a,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!0),u=Object(s.a)(i,2),o=u[0],m=u[1];Object(n.useEffect)(function(){(function(){var e=Object(w.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,q("/members");case 4:t=e.sent,c(S.a.values(t)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,m(!1),e.finish(10);case 13:case"end":return e.stop()}},e,null,[[1,8,10,13]])}));return function(){return e.apply(this,arguments)}})()()},[]);var p=function(){var e=Object(w.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,B("/members",t);case 4:c(function(e){return e.filter(function(e){return e.uuid!==t})}),I.a.success({message:"Remove Complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),I.a.error({message:"Remove Error!",description:"".concat(e.t0),duration:4});case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),f=Object(n.useCallback)(function(e){return R()(e).local().format("YYYY/MM/DD HH:mm:ss")},[]),d=Object(n.useCallback)(function(e,t){return r.a.createElement("span",null,r.a.createElement(l.b,{to:"/members/".concat(t.uuid,"/edit")},"Edit"),r.a.createElement(K.a,{type:"vertical"}),r.a.createElement(T.a,{title:"Are you sure to delete ?",onConfirm:function(){return p(t.uuid)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"javascript:;"},"Delete")))},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/members/create"},r.a.createElement(g.a,{type:"primary",style:{marginLeft:"15px",marginBottom:"15px"}},"Create")),r.a.createElement(D.a,{dataSource:a,loading:o},r.a.createElement(D.a.Column,Object.assign({title:"Name",dataIndex:"fullName",key:"fullName"},A("fullName"))),r.a.createElement(D.a.Column,Object.assign({title:"Title",dataIndex:"title",key:"title"},A("title"))),r.a.createElement(D.a.Column,{title:"Last edit",dataIndex:"timestamp",key:"timestamp",render:f,sorter:function(e,t){return parseInt(e.timestamp)-parseInt(t.timestamp)}}),r.a.createElement(D.a.Column,{title:"Action",key:"action",render:d})))},W=a(34),J=a(219),G=a(461),Q=a(57),$=a.n(Q),Z=a(23),X=function(e){var t=e.dataKey,a=e.getFieldDecorator,c=e.getFieldValue,i=e.setFieldsValue,l=e.validationRules,u=void 0===l?[]:l,o=e.isTextArea,s=void 0!==o&&o;a("".concat(t,"-idx"),{initialValue:[0]});var m=c("".concat(t,"-idx")),p=Object(n.useRef)(m.length),f=function(e){return function(){var a=c("".concat(t,"-idx"));1!==a.length&&i(Object(Z.a)({},"".concat(t,"-idx"),a.filter(function(t){return t!==e})))}};return r.a.createElement(r.a.Fragment,null,m.map(function(e){return r.a.createElement(G.a.Item,{style:{width:"150%",marginBottom:"-20px"},key:e,wrapperCol:{span:20}},a("".concat(t,"[").concat(e,"]"),{rules:u})(s?r.a.createElement(P.a.TextArea,{style:{width:"80%"},autosize:!0}):r.a.createElement(P.a,{style:{width:"80%"}})),m.length>1?r.a.createElement(h.a,{type:"minus-circle-o",onClick:f(e),style:{marginLeft:"10px"}}):null)}),r.a.createElement(G.a.Item,{wrapperCol:{span:12,offset:2},style:{marginBottom:"unset"}},r.a.createElement(g.a,{type:"dashed",onClick:function(){var e=c("".concat(t,"-idx"));i(Object(Z.a)({},"".concat(t,"-idx"),[].concat(Object(W.a)(e),[p.current]))),p.current=p.current+1},style:{width:"60%"}},r.a.createElement(h.a,{type:"plus"})," Add field")))},_=a(35),ee=a(460),te=a(462),ae=r.a.createElement("div",null,r.a.createElement(h.a,{type:"plus"}),r.a.createElement("div",null,"Drag or Click to upload")),ne=function(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})},re=function(e){var t=e.dataKey,a=e.getFieldDecorator,c=e.getFieldValue,i=e.setFieldsValue,l=e.endpoint,u=void 0===l?"":l,o=e.isSingleImg,m=void 0!==o&&o,p=e.withCaption,f=void 0!==p&&p;a(t,{initialValue:[]});var d=Object(n.useState)({previewVisible:!1,previewImage:""}),b=Object(s.a)(d,2),v=b[0],E=b[1],y=Object(n.useCallback)(function(){var e=Object(w.a)(x.a.mark(function e(a){var n,r,l,o,s,m,p,f,d;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.onError,r=a.onSuccess,l=a.file,e.prev=1,o=l.name,e.next=5,H(u,o,l);case 5:s=e.sent,m=s.image,p=s.imageURL,f={uuid:$()(),file:Object(_.a)({},l,{name:o,url:p}),caption:""},d=c(t),i(Object(Z.a)({},t,[].concat(Object(W.a)(d),[f]))),r(null,m),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),n(e.t0);case 17:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}(),[c,i,t]),h=Object(n.useCallback)(function(){return E(function(e){return Object(_.a)({},e,{previewVisible:!1})})},[E]),g=Object(n.useCallback)(function(){var e=Object(w.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,ne(t.originFileObj);case 3:t.preview=e.sent;case 4:E({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[E]),j=Object(n.useCallback)(function(e){return!("image/jpeg"!==e.type&&"image/png"!==e.type)||(I.a.error({message:"You can only upload png or jpg file.",duration:2}),!1)},[]),O=Object(n.useCallback)(function(e){var a=c(t).filter(function(t){return!(t.file.uid===e.uid)});i(Object(Z.a)({},t,a))},[c,i,t]),k=Object(n.useCallback)(function(){var e=c(t);return e?e.reduce(function(e,t){return[].concat(Object(W.a)(e),[t.file])},[]):[]},[c,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{name:"files",listType:"picture-card",defaultFileList:k(),customRequest:y,onPreview:g,onRemove:O,beforeUpload:j},m&&c(t)&&c(t).length>=1?null:ae),f&&c(t)&&c(t).map(function(e,a){return r.a.createElement(P.a,{key:"".concat(e.file.name,"-").concat(a),value:e.caption,onChange:(n=e.file.uid,function(e){var a=c(t).map(function(t){return t.file.uid===n?{uid:n,file:t.file,caption:e.target.value}:t});i(Object(Z.a)({},t,a))})});var n}),r.a.createElement(te.a,{visible:v.previewVisible,footer:null,onCancel:h},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:v.previewImage})))},ce=function(e){var t=e.dataKey,a=e.getFieldDecorator,c=e.getFieldValue,i=e.setFieldsValue,l=e.fields,u=void 0===l?[]:l,o=Object(n.useState)(!1),m=Object(s.a)(o,2),p=m[0],f=m[1];a("".concat(t,"-idx"),{initialValue:[]});var d=c("".concat(t,"-idx"));a(t,{initialValue:[]});var b=c(t),v=Object(n.useRef)(d.length),E=function(e){return function(){var a,n=c("".concat(t,"-idx")),r=Object(W.a)(b);r[e]=void 0,i((a={},Object(Z.a)(a,"".concat(t,"-idx"),n.filter(function(t){return t!==e})),Object(Z.a)(a,t,r),a))}},y=function(e,a){return function(n){var r=Object(W.a)(b);r[e]?r[e][a]=n.target.value:r[e]=u.reduce(function(e,t){return t.key===a?Object(_.a)({},e,Object(Z.a)({},t.key,n.target.value)):Object(_.a)({},e,Object(Z.a)({},t.key,""))},{}),i(Object(Z.a)({},t,r))}};return Object(n.useEffect)(function(){if(!p&&b.length>0){var e=b.reduce(function(e,a,n){var r=Object.entries(a).reduce(function(e,a){var r=Object(s.a)(a,2),c=r[0],i=r[1];return Object(_.a)({},e,Object(Z.a)({},"".concat(t,"-").concat(c,"-").concat(n),i))},{});return Object(_.a)({},e,r)},{});i(Object(_.a)({},e)),f(!0)}!p&&d.length<1&&f(!0)}),r.a.createElement(r.a.Fragment,null,d.map(function(e){return r.a.createElement(G.a.Item,{style:{width:"150%",marginBottom:"-20px"},key:e,wrapperCol:{span:20}},u.map(function(n){var c=n.key,i=n.validationRules,l=n.inputParams,u=n.isTextArea;return r.a.createElement(G.a.Item,{key:c},u?a("".concat(t,"-").concat(c,"-").concat(e),{rules:i})(r.a.createElement(P.a.TextArea,Object.assign({onChange:y(e,c),style:{width:"80%"},autosize:!0},l))):a("".concat(t,"-").concat(c,"-").concat(e),{rules:i})(r.a.createElement(P.a,Object.assign({onChange:y(e,c)},l))))}),d.length>0?r.a.createElement(h.a,{type:"minus-circle-o",onClick:E(e),style:{marginLeft:"10px"}}):null)}),r.a.createElement(G.a.Item,{wrapperCol:{span:12,offset:2},style:{marginBottom:"unset"}},r.a.createElement(g.a,{type:"dashed",onClick:function(){var e=c("".concat(t,"-idx"));i(Object(Z.a)({},"".concat(t,"-idx"),[].concat(Object(W.a)(e),[v.current]))),v.current=v.current+1},style:{width:"60%"}},r.a.createElement(h.a,{type:"plus"})," Add field")))};function ie(){var e=Object(b.a)(["\n  margin-bottom: 0;\n"]);return ie=function(){return e},e}var le=Object(v.a)(G.a.Item)(ie()),ue=function(e){var t=e.dataKey,a=e.validationRules,n=void 0===a?[]:a,c=(e.inputProps,e.getFieldDecorator);return r.a.createElement(G.a.Item,null,c(t,{rules:n})(r.a.createElement(P.a.TextArea,{autosize:!0})))},oe=function(e){var t=e.dataKey,a=e.validationRules,n=void 0===a?[]:a,c=e.inputProps,i=void 0===c?{}:c,l=e.getFieldDecorator;return r.a.createElement(G.a.Item,null,l(t,{rules:n})(r.a.createElement(P.a,i)))},se=[{key:"fullName",defaultValue:""},{key:"title",defaultValue:""},{key:"email",defaultValue:""},{key:"focusOn",defaultValue:[],withLocalKey:!0},{key:"website",defaultValue:""},{key:"avatar",defaultValue:[]},{key:"about",defaultValue:""},{key:"publications",defaultValue:[],withLocalKey:!0},{key:"awards",defaultValue:[],withLocalKey:!0}],me=se.reduce(function(e,t){return Object(_.a)({},e,Object(Z.a)({},t.key,t.key))},{});function pe(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return pe=function(){return e},e}function fe(){var e=Object(b.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  font-size: 24;\n"]);return fe=function(){return e},e}var de=Object(v.a)(h.a)(fe()),be=v.a.div(pe()),ve=function(e){var t={};return se.forEach(function(a){var n=a.key,r=a.withLocalKey;t[n]="imgs"===n?e[n].map(function(e){return{name:e.file.name,url:e.file.url,caption:e.caption}}):"avatar"===n?e[n].map(function(e){return{name:e.file.name,url:e.file.url}}):r?e[n]?e[n].filter(function(e){return!!e}):[]:e[n]?e[n]:""}),t},Ee=function(){var e=Object(w.a)(x.a.mark(function e(t){var a,n=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]?n[1]:"",e.prev=1,!a){e.next=9;break}return t.uuid=a,t.timestamp=Date.now(),e.next=7,U("/members",a,t);case 7:e.next=14;break;case 9:return t.uuid=$()(),t.createdTimestamp=Date.now(),t.timestamp=t.createdTimestamp,e.next=14,N("/members",t.uuid,t);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(1),e.t0;case 19:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t){return e.apply(this,arguments)}}(),ye=G.a.create()(function(e){var t=e.form,a=e.match,c=e.history,i=t.validateFields,u=t.getFieldDecorator,o=t.setFieldsValue,m=Object(n.useState)(!0),p=Object(s.a)(m,2),f=p[0],d=p[1],b=Object(n.useState)({}),v=Object(s.a)(b,2),E=v[0],y=v[1],h=Object(n.useCallback)(function(){se.forEach(function(e){e.withLocalKey?u("".concat(e.key,"-idx")):u(e.key)})},[u]),j=Object(n.useCallback)(function(e){var t={},a={};se.forEach(function(n){var r=n.key,c=n.withLocalKey,i=n.defaultValue;if("imgs"===r){var l=e[r]?e[r].map(function(e,t){return{file:{uid:"img-".concat(t),name:e.name,status:"done",url:e.url},caption:e.caption}}):i;t[r]=l}else if("avatar"===r){var u=e[r]?[{file:{uid:"avatar",name:e.avatar[0].name,status:"done",url:e.avatar[0].url},caption:""}]:i;t[r]=u}else if(c){var o=e[r]?Object(W.a)(Array(e[r].length)).map(function(e,t){return t}):i;t["".concat(r,"-idx")]=o,a[r]=e[r]?e[r]:i}else t[r]=e[r]?e[r]:i}),o(t),setTimeout(function(){return o(a)},0)},[o]),O=Object(n.useCallback)(function(e){e.preventDefault(),i(function(){var e=Object(w.a)(x.a.mark(function e(t,n){var r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=16;break}return console.log("Received values of form: ",n),e.prev=2,r=ve(n),e.next=6,Ee(r,a.params.uuid);case 6:I.a.success({message:"Create/Edit ".concat(n.title," complete!"),duration:4}),c.push("/members/list"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),I.a.error({message:"Create ".concat(n.title," error!"),description:"".concat(e.t0),duration:2});case 14:e.next=17;break;case 16:console.log("MEMBER ON SUBMIT ERROR:",t);case 17:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t,a){return e.apply(this,arguments)}}())},[i,a.params.uuid,c]);return Object(n.useEffect)(function(){var e=function(){var e=Object(w.a)(x.a.mark(function e(t){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,M("/members",t);case 3:(a=e.sent)&&(y(a),j(a)),d(!1);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();h(),a.params.uuid?e(a.params.uuid):d(!1)},[d,y,j,h,a.params.uuid]),f?r.a.createElement(J.a,{indicator:r.a.createElement(de,{type:"loading",spin:!0})}):r.a.createElement(G.a,{onSubmit:O,labelCol:{span:3},wrapperCol:{span:12,offset:1}},r.a.createElement(G.a.Item,{label:"UUID"},E.uuid?r.a.createElement("strong",null,E.uuid):""),r.a.createElement(le,{label:"Full name"},r.a.createElement(oe,Object.assign({dataKey:me.fullName,validationRules:[{required:!0,message:"Please set the full name of this memeber."}]},t))),r.a.createElement(G.a.Item,{label:"Avatar"},r.a.createElement(re,Object.assign({dataKey:me.avatar,isSingleImg:!0,endpoint:"/members"},t))),r.a.createElement(le,{label:"Title"},r.a.createElement(oe,Object.assign({dataKey:me.title,validationRules:[{required:!0,message:"Please set the title of this member(e.g. professor, PhD, Master)."}]},t))),r.a.createElement(le,{label:"Email"},r.a.createElement(oe,Object.assign({dataKey:me.email,validationRules:[{type:"email",message:"The input must be an email."},{required:!0,message:"Please set the email of this member."}]},t))),r.a.createElement(G.a.Item,{label:"Focus on"},r.a.createElement(X,Object.assign({dataKey:me.focusOn},t))),r.a.createElement(le,{label:"Personal website"},r.a.createElement(oe,Object.assign({dataKey:me.website,validationRules:[{type:"url",message:"The input must be an url."}]},t))),r.a.createElement(le,{label:"About"},r.a.createElement(ue,Object.assign({dataKey:me.about},t))),r.a.createElement(G.a.Item,{label:"Publications"},r.a.createElement(ce,Object.assign({dataKey:me.publications,fields:[{key:"title",inputParams:{placeholder:"title"},validationRules:[{required:!0,message:"Publication's title is required."}]},{key:"conference",inputParams:{placeholder:"conference"}},{key:"year",inputParams:{placeholder:"year"},validationRules:[{validator:function(e,t){return!isNaN(t)},message:"Input must be a number."}]},{key:"link",inputParams:{placeholder:"link"},validationRules:[{type:"url",message:"Input must be an url."}]}]},t))),r.a.createElement(G.a.Item,{label:"Awards"},r.a.createElement(ce,Object.assign({dataKey:me.awards,fields:[{key:"title",inputParams:{placeholder:"title"}},{key:"year",inputParams:{placeholder:"year"}}]},t))),r.a.createElement(be,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(l.b,{to:"/members/list"},r.a.createElement(g.a,{type:"danger"},"Back"))))}),he=function(e){var t=e.match.url;return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"".concat(t,"/list"),component:z}),r.a.createElement(o.b,{path:"".concat(t,"/:uuid/edit"),component:ye}),r.a.createElement(o.b,{path:"".concat(t,"/create"),component:ye}),r.a.createElement(o.a,{from:"*",to:"".concat(t,"/list")}))},ge=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!0),u=Object(s.a)(i,2),o=u[0],m=u[1];Object(n.useEffect)(function(){(function(){var e=Object(w.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,q("/news");case 4:t=e.sent,c(S.a.values(t)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,m(!1),e.finish(10);case 13:case"end":return e.stop()}},e,null,[[1,8,10,13]])}));return function(){return e.apply(this,arguments)}})()()},[]);var p=function(){var e=Object(w.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,B("/news",t);case 4:c(function(e){return e.filter(function(e){return e.uuid!==t})}),I.a.success({message:"Remove Complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),I.a.error({message:"Remove Error!",description:"".concat(e.t0),duration:4});case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),f=Object(n.useCallback)(function(e){return R()(e).local().format("YYYY/MM/DD HH:mm:ss")},[]),d=Object(n.useCallback)(function(e,t){return r.a.createElement("span",null,r.a.createElement(l.b,{to:"/news/".concat(t.uuid,"/edit")},"Edit"),r.a.createElement(K.a,{type:"vertical"}),r.a.createElement(T.a,{title:"Are you sure to delete ?",onConfirm:function(){return p(t.uuid)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"javascript:;"},"Delete")))},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/news/create"},r.a.createElement(g.a,{type:"primary",style:{marginLeft:"15px",marginBottom:"15px"}},"Create")),r.a.createElement(D.a,{dataSource:a,loading:o},r.a.createElement(D.a.Column,Object.assign({title:"Title",dataIndex:"title",key:"title"},A("title"))),r.a.createElement(D.a.Column,{title:"Date",dataIndex:"date",key:"date",sorter:function(e,t){return R()(e.date).unix()-R()(t.date).unix()}}),r.a.createElement(D.a.Column,{title:"Last edit",dataIndex:"timestamp",key:"timestamp",render:f,sorter:function(e,t){return parseInt(e.timestamp)-parseInt(t.timestamp)}}),r.a.createElement(D.a.Column,{title:"Action",key:"action",render:d})))},je=[{key:"title",defaultValue:""},{key:"date",defaultValue:""},{key:"description",defaultValue:""}],Oe=je.reduce(function(e,t){return Object(_.a)({},e,Object(Z.a)({},t.key,t.key))},{});function ke(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return ke=function(){return e},e}function xe(){var e=Object(b.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  font-size: 24;\n"]);return xe=function(){return e},e}var we=Object(v.a)(h.a)(xe()),Ce=v.a.div(ke()),Re=function(e){var t={};return je.forEach(function(a){var n=a.key,r=a.withLocalKey;t[n]="imgs"===n?e[n].map(function(e){return{name:e.file.name,url:e.file.url,caption:e.caption}}):"avatar"===n?e[n].map(function(e){return{name:e.file.name,url:e.file.url}}):r?e[n].filter(function(e){return!!e}):e[n]?e[n]:""}),t},Ie=function(){var e=Object(w.a)(x.a.mark(function e(t){var a,n=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]?n[1]:"",e.prev=1,!a){e.next=9;break}return t.uuid=a,t.timestamp=Date.now(),e.next=7,U("/news",a,t);case 7:e.next=14;break;case 9:return t.uuid=$()(),t.createdTimestamp=Date.now(),t.timestamp=t.createdTimestamp,e.next=14,N("/news",t.uuid,t);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(1),e.t0;case 19:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t){return e.apply(this,arguments)}}(),Ke=G.a.create()(function(e){var t=e.form,a=e.match,c=e.history,i=t.validateFields,u=t.getFieldDecorator,o=t.setFieldsValue,m=Object(n.useState)(!0),p=Object(s.a)(m,2),f=p[0],d=p[1],b=Object(n.useState)({}),v=Object(s.a)(b,2),E=v[0],y=v[1],h=Object(n.useCallback)(function(){je.forEach(function(e){e.withLocalKey?u("".concat(e.key,"-idx")):u(e.key)})},[u]),j=Object(n.useCallback)(function(e){var t={},a={};je.forEach(function(n){var r=n.key,c=n.withLocalKey,i=n.defaultValue;if("imgs"===r){var l=e[r]?e[r].map(function(e,t){return{file:{uid:"img-".concat(t),name:e.name,status:"done",url:e.url},caption:e.caption}}):i;t[r]=l}else if("avatar"===r){var u=e[r]?[{file:{uid:"avatar",name:e.avatar[0].name,status:"done",url:e.avatar[0].url},caption:""}]:i;t[r]=u}else if(c){var o=e[r]?Object(W.a)(Array(e[r].length)).map(function(e,t){return t}):[0];t["".concat(r,"-idx")]=o,a[r]=e[r]?e[r]:i}else t[r]=e[r]?e[r]:i}),o(t),setTimeout(function(){return o(a)},0)},[o]),O=Object(n.useCallback)(function(e){e.preventDefault(),i(function(){var e=Object(w.a)(x.a.mark(function e(t,n){var r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=16;break}return console.log("Received values of form: ",n),e.prev=2,r=Re(n),e.next=6,Ie(r,a.params.uuid);case 6:I.a.success({message:"Create/Edit ".concat(n.title," complete!"),duration:4}),c.push("/news/list"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),I.a.error({message:"Create ".concat(n.title," error!"),description:"".concat(e.t0),duration:2});case 14:e.next=17;break;case 16:console.log("NEWS ON SUBMIT ERROR:",t);case 17:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t,a){return e.apply(this,arguments)}}())},[i,a.params.uuid,c]);return Object(n.useEffect)(function(){var e=function(){var e=Object(w.a)(x.a.mark(function e(t){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,M("/news",t);case 3:(a=e.sent)&&(y(a),j(a)),d(!1);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();h(),a.params.uuid?e(a.params.uuid):d(!1)},[d,y,j,h,a.params.uuid]),f?r.a.createElement(J.a,{indicator:r.a.createElement(we,{type:"loading",spin:!0})}):r.a.createElement(G.a,{onSubmit:O,labelCol:{span:3},wrapperCol:{span:12,offset:1}},r.a.createElement(G.a.Item,{label:"UUID"},E.uuid?r.a.createElement("strong",null,E.uuid):""),r.a.createElement(le,{label:"Title"},r.a.createElement(oe,Object.assign({dataKey:Oe.title,validationRules:[{required:!0,message:"Please set the title of this news."}]},t))),r.a.createElement(le,{label:"Description"},r.a.createElement(ue,Object.assign({dataKey:Oe.description},t))),r.a.createElement(le,{label:"Date"},r.a.createElement(oe,Object.assign({dataKey:Oe.date,validationRules:[{validator:function(e,t){return/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(t)},message:"Input must be format as YYYY-MM-DD."},{required:!0,message:"Please set the date of this news(YYYY-MM-DD)."}]},t))),r.a.createElement(Ce,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(l.b,{to:"/news/list"},r.a.createElement(g.a,{type:"danger"},"Back"))))}),Te=function(e){var t=e.match.url;return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"".concat(t,"/list"),component:ge}),r.a.createElement(o.b,{path:"".concat(t,"/:uuid/edit"),component:Ke}),r.a.createElement(o.b,{path:"".concat(t,"/create"),component:Ke}),r.a.createElement(o.a,{from:"*",to:"".concat(t,"/list")}))},De=a(465),Ve=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!0),u=Object(s.a)(i,2),o=u[0],m=u[1];Object(n.useEffect)(function(){(function(){var e=Object(w.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,q("/projects");case 4:t=e.sent,c(S.a.values(t)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,m(!1),e.finish(10);case 13:case"end":return e.stop()}},e,null,[[1,8,10,13]])}));return function(){return e.apply(this,arguments)}})()()},[]);var p=function(){var e=Object(w.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,B("/projects",t);case 4:c(function(e){return e.filter(function(e){return e.uuid!==t})}),I.a.success({message:"Remove Complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),I.a.error({message:"Remove Error!",description:"".concat(e.t0),duration:4});case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),f=Object(n.useCallback)(function(e){return e&&r.a.createElement("span",null,e.map(function(e){return r.a.createElement(De.a,{color:"volcano",key:e},e.toUpperCase())}))},[]),d=Object(n.useCallback)(function(e){return R()(e).local().format("YYYY/MM/DD HH:mm:ss")},[]),b=Object(n.useCallback)(function(e,t){return r.a.createElement("span",null,r.a.createElement(l.b,{to:"/projects/".concat(t.uuid,"/edit")},"Edit"),r.a.createElement(K.a,{type:"vertical"}),r.a.createElement(T.a,{title:"Are you sure to delete ?",onConfirm:function(){return p(t.uuid)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"javascript:;"},"Delete")))},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/projects/create"},r.a.createElement(g.a,{type:"primary",style:{marginLeft:"15px",marginBottom:"15px"}},"Create")),r.a.createElement(D.a,{dataSource:a,loading:o},r.a.createElement(D.a.Column,Object.assign({title:"Title",dataIndex:"title",key:"title"},A("title"))),r.a.createElement(D.a.Column,{title:"Year",dataIndex:"year",key:"year",sorter:function(e,t){return parseInt(e.year)-parseInt(t.year)}}),r.a.createElement(D.a.Column,{title:"Tags",dataIndex:"tags",key:"tags",render:f}),r.a.createElement(D.a.Column,{title:"Last edit",dataIndex:"timestamp",key:"timestamp",render:d}),r.a.createElement(D.a.Column,{title:"Action",key:"action",render:b})))},Se=[{key:"showTitle",defaultValue:""},{key:"title",defaultValue:""},{key:"year",defaultValue:""},{key:"authors",defaultValue:[],withLocalKey:!0},{key:"abstract",defaultValue:""},{key:"cover",defaultValue:[]},{key:"imgs",defaultValue:[]},{key:"videos",defaultValue:[],withLocalKey:!0},{key:"descriptions",defaultValue:[],withLocalKey:!0},{key:"tags",defaultValue:[],withLocalKey:!0},{key:"acceptedYear",defaultValue:""},{key:"publicationOn",defaultValue:""},{key:"pdf",defaultValue:""},{key:"doi",defaultValue:""}],Pe=Se.reduce(function(e,t){return Object(_.a)({},e,Object(Z.a)({},t.key,t.key))},{});function Le(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return Le=function(){return e},e}function Ae(){var e=Object(b.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  font-size: 24;\n"]);return Ae=function(){return e},e}var Fe=Object(v.a)(h.a)(Ae()),Ye=v.a.div(Le()),Ne=function(e){var t={};return Se.forEach(function(a){var n=a.key,r=a.withLocalKey;t[n]="imgs"===n?e[n].map(function(e){return{name:e.file.name,url:e.file.url,caption:e.caption}}):"cover"===n?e[n].map(function(e){return{name:e.file.name,url:e.file.url}}):r?e[n].filter(function(e){return!!e}):e[n]?e[n]:""}),t},qe=function(){var e=Object(w.a)(x.a.mark(function e(t){var a,n=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]?n[1]:"",e.prev=1,!a){e.next=9;break}return t.uuid=a,t.timestamp=Date.now(),e.next=7,U("/projects",a,t);case 7:e.next=14;break;case 9:return t.uuid=$()(),t.createdTimestamp=Date.now(),t.timestamp=t.createdTimestamp,e.next=14,N("/projects",t.uuid,t);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(1),e.t0;case 19:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t){return e.apply(this,arguments)}}(),Me=G.a.create()(function(e){var t=e.form,a=e.match,c=e.history,i=t.validateFields,u=t.getFieldDecorator,o=t.setFieldsValue,m=Object(n.useState)(!0),p=Object(s.a)(m,2),f=p[0],d=p[1],b=Object(n.useState)({}),v=Object(s.a)(b,2),E=v[0],y=v[1],h=Object(n.useCallback)(function(){Se.forEach(function(e){e.withLocalKey?u("".concat(e.key,"-idx")):u(e.key)})},[u]),j=Object(n.useCallback)(function(e){var t={},a={};Se.forEach(function(n){var r=n.key,c=n.withLocalKey,i=n.defaultValue;if("imgs"===r){var l=e[r]?e[r].map(function(e,t){return{file:{uid:"img-".concat(t),name:e.name,status:"done",url:e.url},caption:e.caption}}):i;t[r]=l}else if("cover"===r){var u=e[r]?[{file:{uid:"cover",name:e.cover[0].name,status:"done",url:e.cover[0].url},caption:""}]:i;t[r]=u}else if(c){var o=e[r]?Object(W.a)(Array(e[r].length)).map(function(e,t){return t}):[0];t["".concat(r,"-idx")]=o,a[r]=e[r]?e[r]:i}else t[r]=e[r]?e[r]:i}),o(t),setTimeout(function(){return o(a)},0)},[o]),O=Object(n.useCallback)(function(e){e.preventDefault(),i(function(){var e=Object(w.a)(x.a.mark(function e(t,n){var r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=16;break}return console.log("Received values of form: ",n),e.prev=2,r=Ne(n),e.next=6,qe(r,a.params.uuid);case 6:I.a.success({message:"Create/Edit ".concat(n.title," complete!"),duration:4}),c.push("/projects/list"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),I.a.error({message:"Create ".concat(n.title," error!"),description:"".concat(e.t0),duration:2});case 14:e.next=17;break;case 16:console.log("PROJECT ON SUBMIT ERROR:",t);case 17:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t,a){return e.apply(this,arguments)}}())},[i,a.params.uuid,c]);return Object(n.useEffect)(function(){var e=function(){var e=Object(w.a)(x.a.mark(function e(t){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,M("/projects",t);case 3:(a=e.sent)&&(y(a),j(a)),d(!1);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();h(),a.params.uuid?e(a.params.uuid):d(!1)},[d,y,j,h,a.params.uuid]),f?r.a.createElement(J.a,{indicator:r.a.createElement(Fe,{type:"loading",spin:!0})}):r.a.createElement(G.a,{onSubmit:O,labelCol:{span:3},wrapperCol:{span:12,offset:1}},r.a.createElement(G.a.Item,{label:"UUID"},E.uuid?r.a.createElement("strong",null,E.uuid):""),r.a.createElement(le,{label:"Show title"},r.a.createElement(oe,Object.assign({dataKey:Pe.showTitle,validationRules:[{required:!0,message:"Please set the show title which will show on the enter image of this project."}]},t))),r.a.createElement(le,{label:"Title"},r.a.createElement(oe,Object.assign({dataKey:Pe.title,validationRules:[{required:!0,message:"Please set the title of this project."}]},t))),r.a.createElement(le,{label:"Year"},r.a.createElement(oe,Object.assign({dataKey:Pe.year,validationRules:[{validator:function(e,t){return!isNaN(t)},message:"The input must be a number."},{required:!0,message:"Please set the starting year of this project."}]},t))),r.a.createElement(G.a.Item,{label:"Authors"},r.a.createElement(X,Object.assign({dataKey:Pe.authors,validationRules:[{required:!0,message:"Please set at least one author of this project, and remove unuse feild."}]},t))),r.a.createElement(G.a.Item,{label:"Cover"},r.a.createElement(re,Object.assign({title:"Cover",dataKey:Pe.cover,isSingleImg:!0,endpoint:"/projects"},t))),r.a.createElement(G.a.Item,{label:"Images"},r.a.createElement(re,Object.assign({dataKey:Pe.imgs,withCaption:!0},t))),r.a.createElement(G.a.Item,{label:"Video links"},r.a.createElement(X,Object.assign({dataKey:Pe.videos,validationRules:[{type:"url",message:"Input must be a link."}]},t))),r.a.createElement(le,{label:"Abstract"},r.a.createElement(ue,Object.assign({dataKey:Pe.abstract,validationRules:[{required:!0,message:"Please set the abstract of this project."}]},t))),r.a.createElement(G.a.Item,{label:"Descriptions"},r.a.createElement(X,Object.assign({dataKey:Pe.descriptions,validationRules:[{required:!0,message:"Please set at least one description section of this project, and remove unuse feild."}],isTextArea:!0},t))),r.a.createElement(G.a.Item,{label:"Tags"},r.a.createElement(X,Object.assign({dataKey:Pe.tags},t))),r.a.createElement(le,{label:"Publication on"},r.a.createElement(oe,Object.assign({dataKey:Pe.publicationOn},t))),r.a.createElement(le,{label:"Accepted year"},r.a.createElement(oe,Object.assign({dataKey:Pe.acceptedYear,validationRules:[{validator:function(e,t){return void 0===t||!isNaN(t)},message:"Input must be a number."}]},t))),r.a.createElement(le,{label:"PDF link"},r.a.createElement(oe,Object.assign({dataKey:Pe.pdf,validationRules:[{type:"url",message:"Input must be a link."}]},t))),r.a.createElement(le,{label:"DOI link"},r.a.createElement(oe,Object.assign({dataKey:Pe.doi,validationRules:[{type:"url",message:"Input must be a link."}]},t))),r.a.createElement(G.a.Item,{label:"Yo"},r.a.createElement(ce,Object.assign({dataKey:"test"},t))),r.a.createElement(Ye,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(l.b,{to:"/projects/list"},r.a.createElement(g.a,{type:"danger"},"Back"))))}),Ue=function(e){var t=e.match.url;return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"".concat(t,"/list"),component:Ve}),r.a.createElement(o.b,{path:"".concat(t,"/:uuid/edit"),component:Me}),r.a.createElement(o.b,{path:"".concat(t,"/create"),component:Me}),r.a.createElement(o.a,{from:"*",to:"".concat(t,"/list")}))},Be=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!0),u=Object(s.a)(i,2),o=u[0],m=u[1];Object(n.useEffect)(function(){(function(){var e=Object(w.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,q("/courses");case 4:t=e.sent,c(S.a.values(t)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,m(!1),e.finish(10);case 13:case"end":return e.stop()}},e,null,[[1,8,10,13]])}));return function(){return e.apply(this,arguments)}})()()},[]);var p=function(){var e=Object(w.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,B("/courses",t);case 4:c(function(e){return e.filter(function(e){return e.uuid!==t})}),I.a.success({message:"Remove Complete!",duration:4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),I.a.error({message:"Remove Error!",description:"".concat(e.t0),duration:4});case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),f=Object(n.useCallback)(function(e){return R()(e).local().format("YYYY/MM/DD HH:mm:ss")},[]),d=Object(n.useCallback)(function(e,t){return r.a.createElement("span",null,r.a.createElement(l.b,{to:"/courses/".concat(t.uuid,"/edit")},"Edit"),r.a.createElement(K.a,{type:"vertical"}),r.a.createElement(T.a,{title:"Are you sure to delete ?",onConfirm:function(){return p(t.uuid)},okText:"Yes",cancelText:"No"},r.a.createElement("a",{href:"javascript:;"},"Delete")))},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{to:"/courses/create"},r.a.createElement(g.a,{type:"primary",style:{marginLeft:"15px",marginBottom:"15px"}},"Create")),r.a.createElement(D.a,{dataSource:a,loading:o},r.a.createElement(D.a.Column,Object.assign({title:"Course ID",dataIndex:"courseID",key:"courseID"},A("courseID"))),r.a.createElement(D.a.Column,Object.assign({title:"Name",dataIndex:"name",key:"name"},A("name"))),r.a.createElement(D.a.Column,{title:"Location",dataIndex:"location",key:"location"}),r.a.createElement(D.a.Column,{title:"Last edit",dataIndex:"timestamp",key:"timestamp",render:f,sorter:function(e,t){return parseInt(e.timestamp)-parseInt(t.timestamp)}}),r.a.createElement(D.a.Column,{title:"Action",key:"action",render:d})))},He=[{key:"courseID",defaultValue:""},{key:"name",defaultValue:""},{key:"credits",defaultValue:""},{key:"location",defaultValue:""},{key:"tas",defaultValue:[],withLocalKey:!0},{key:"office",defaultValue:""},{key:"officeHours",defaultValue:[]},{key:"descriptions",defaultValue:[],withLocalKey:!0},{key:"link",defaultValue:""}],ze=He.reduce(function(e,t){return Object(_.a)({},e,Object(Z.a)({},t.key,t.key))},{});function We(){var e=Object(b.a)(["\n  display: flex;\n  margin: 40px 0 0 40px;\n\n  > * {\n    margin: 0 5px;\n  }\n"]);return We=function(){return e},e}function Je(){var e=Object(b.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  font-size: 24;\n"]);return Je=function(){return e},e}var Ge=Object(v.a)(h.a)(Je()),Qe=v.a.div(We()),$e=function(e){var t={};return He.forEach(function(a){var n=a.key,r=a.withLocalKey;t[n]="imgs"===n?e[n].map(function(e){return{name:e.file.name,url:e.file.url,caption:e.caption}}):"avatar"===n?e[n].map(function(e){return{name:e.file.name,url:e.file.url}}):r?e[n].filter(function(e){return!!e}):e[n]?e[n]:""}),t},Ze=function(){var e=Object(w.a)(x.a.mark(function e(t){var a,n=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]?n[1]:"",e.prev=1,!a){e.next=9;break}return t.uuid=a,t.timestamp=Date.now(),e.next=7,U("/courses",a,t);case 7:e.next=14;break;case 9:return t.uuid=$()(),t.createdTimestamp=Date.now(),t.timestamp=t.createdTimestamp,e.next=14,N("/courses",t.uuid,t);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(1),e.t0;case 19:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t){return e.apply(this,arguments)}}(),Xe=G.a.create()(function(e){var t=e.form,a=e.match,c=e.history,i=t.validateFields,u=t.getFieldDecorator,o=t.setFieldsValue,m=Object(n.useState)(!0),p=Object(s.a)(m,2),f=p[0],d=p[1],b=Object(n.useState)({}),v=Object(s.a)(b,2),E=v[0],y=v[1],h=Object(n.useCallback)(function(){He.forEach(function(e){e.withLocalKey?u("".concat(e.key,"-idx")):u(e.key)})},[u]),j=Object(n.useCallback)(function(e){var t={},a={};He.forEach(function(n){var r=n.key,c=n.withLocalKey,i=n.defaultValue;if("imgs"===r){var l=e[r]?e[r].map(function(e,t){return{file:{uid:"img-".concat(t),name:e.name,status:"done",url:e.url},caption:e.caption}}):i;t[r]=l}else if("avatar"===r){var u=e[r]?[{file:{uid:"avatar",name:e.avatar[0].name,status:"done",url:e.avatar[0].url},caption:""}]:i;t[r]=u}else if(c){var o=e[r]?Object(W.a)(Array(e[r].length)).map(function(e,t){return t}):i;t["".concat(r,"-idx")]=o,a[r]=e[r]?e[r]:i}else t[r]=e[r]?e[r]:i}),o(t),setTimeout(function(){return o(a)},0)},[o]),O=Object(n.useCallback)(function(e){e.preventDefault(),i(function(){var e=Object(w.a)(x.a.mark(function e(t,n){var r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=16;break}return console.log("Received values of form: ",n),e.prev=2,r=$e(n),e.next=6,Ze(r,a.params.uuid);case 6:I.a.success({message:"Create/Edit ".concat(n.title," complete!"),duration:4}),c.push("/courses/list"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),I.a.error({message:"Create ".concat(n.title," error!"),description:"".concat(e.t0),duration:2});case 14:e.next=17;break;case 16:console.log("COURSE ON SUBMIT ERROR:",t);case 17:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t,a){return e.apply(this,arguments)}}())},[i,a.params.uuid,c]);return Object(n.useEffect)(function(){var e=function(){var e=Object(w.a)(x.a.mark(function e(t){var a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,M("/courses",t);case 3:(a=e.sent)&&(y(a),j(a)),d(!1);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();h(),a.params.uuid?e(a.params.uuid):d(!1)},[d,y,j,h,a.params.uuid]),f?r.a.createElement(J.a,{indicator:r.a.createElement(Ge,{type:"loading",spin:!0})}):r.a.createElement(G.a,{onSubmit:O,labelCol:{span:3},wrapperCol:{span:12,offset:1}},r.a.createElement(G.a.Item,{label:"UUID"},E.uuid?r.a.createElement("strong",null,E.uuid):""),r.a.createElement(le,{label:"Course ID"},r.a.createElement(oe,Object.assign({dataKey:ze.courseID,validationRules:[{required:!0,message:"Please set the course id of this course."}]},t))),r.a.createElement(le,{label:"Name"},r.a.createElement(oe,Object.assign({dataKey:ze.name,validationRules:[{required:!0,message:"Please set the name of this course."}]},t))),r.a.createElement(le,{label:"Credits"},r.a.createElement(oe,Object.assign({dataKey:ze.credits,validationRules:[{validator:function(e,t){return!isNaN(t)},message:"The input must be an number."},{required:!0,message:"Please set the credits of this course."}]},t))),r.a.createElement(le,{label:"Location"},r.a.createElement(oe,Object.assign({dataKey:ze.location,validationRules:[{required:!0,message:"Please set the location of this course."}]},t))),r.a.createElement(G.a.Item,{label:"TAs"},r.a.createElement(ce,Object.assign({dataKey:ze.tas,fields:[{key:"name",inputParams:{placeholder:"TA's name"},validationRules:[{required:!0,message:"TA's name is required."}]},{key:"email",inputParams:{placeholder:"TA's email"},validationRules:[{required:!0,message:"TA's email is required."},{type:"email",message:"Input must be email."}]}]},t))),r.a.createElement(le,{label:"Office"},r.a.createElement(oe,Object.assign({dataKey:ze.office,validationRules:[{required:!0,message:"Please set the professor's office."}]},t))),r.a.createElement(le,{label:"Office hours"},r.a.createElement(oe,Object.assign({dataKey:ze.officeHours,validationRules:[{required:!0,message:"Please set the professor's office hours."}]},t))),r.a.createElement(G.a.Item,{label:"Descriptions"},r.a.createElement(X,Object.assign({dataKey:ze.descriptions},t))),r.a.createElement(le,{label:"Information link"},r.a.createElement(oe,Object.assign({dataKey:ze.link,validationRules:[{required:!0,message:"Please set the link to the nctu course information page."},{type:"url",message:"The input must be an url."}]},t))),r.a.createElement(Qe,null,r.a.createElement(g.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(l.b,{to:"/courses/list"},r.a.createElement(g.a,{type:"danger"},"Back"))))}),_e=function(e){var t=e.match.url;return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"".concat(t,"/list"),component:Be}),r.a.createElement(o.b,{path:"".concat(t,"/:uuid/edit"),component:Xe}),r.a.createElement(o.b,{path:"".concat(t,"/create"),component:Xe}),r.a.createElement(o.a,{from:"*",to:"".concat(t,"/list")}))};function et(){var e=Object(b.a)(["\n  &.active > span {\n    color: #fff;\n  }\n"]);return et=function(){return e},e}var tt=E.a.Header,at=E.a.Content,nt=E.a.Footer,rt=E.a.Sider,ct=Object(v.a)(l.c)(et()),it=function(){var e=Object(n.useCallback)(function(){f.auth().signOut()},[]);return r.a.createElement(E.a,{style:{minWidth:"100vw",minHeight:"100vh"}},r.a.createElement(rt,{breakpoint:"lg",collapsedWidth:"0"},r.a.createElement(O,null,"Cross Reality Lab"),r.a.createElement(y.b,{theme:"dark",mode:"inline",selectedKeys:[]},r.a.createElement(y.b.Item,{key:"1"},r.a.createElement(ct,{to:"/projects",activeClassName:"active"},r.a.createElement(h.a,{type:"project"}),r.a.createElement("span",null,"Projects"))),r.a.createElement(y.b.Item,{key:"2"},r.a.createElement(ct,{to:"/members",activeClassName:"active"},r.a.createElement(h.a,{type:"user"}),r.a.createElement("span",null,"Members"))),r.a.createElement(y.b.Item,{key:"3"},r.a.createElement(ct,{to:"/news",activeClassName:"active"},r.a.createElement(h.a,{type:"alert"}),r.a.createElement("span",null,"News"))),r.a.createElement(y.b.Item,{key:"4"},r.a.createElement(ct,{to:"/courses",activeClassName:"active"},r.a.createElement(h.a,{type:"book"}),r.a.createElement("span",null,"Courses"))))),r.a.createElement(E.a,null,r.a.createElement(tt,{style:{background:"#fff",padding:"0 20px",textAlign:"end"}},r.a.createElement(g.a,{type:"danger",onClick:e},"Sign out")),r.a.createElement(at,{style:{margin:"24px 16px 0"}},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/projects",component:Ue}),r.a.createElement(o.b,{path:"/members",component:he}),r.a.createElement(o.b,{path:"/news",component:Te}),r.a.createElement(o.b,{path:"/courses",component:_e}),r.a.createElement(o.a,{to:"/projects"}))),r.a.createElement(nt,{style:{textAlign:"center"}},"Cross Reality Lab Admin \xa92019")))};function lt(){var e=Object(b.a)(["\n  width: 100%;\n  height: 100vh;\n  padding-top: 10%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  background-color: #eee;\n"]);return lt=function(){return e},e}var ut=v.a.div(lt()),ot=G.a.create()(function(e){var t=e.history,a=e.form,c=Object(n.useCallback)(function(){var e=Object(w.a)(x.a.mark(function e(n){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a.validateFields(function(){var e=Object(w.a)(x.a.mark(function e(a,n){var r,c;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=11;break}return r=n.account,c=n.password,e.prev=2,e.next=5,f.auth().signInWithEmailAndPassword(r,c);case 5:t.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),I.a.error({message:"Auth to server error",description:"".concat(e.t0),duration:2});case 11:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[t,a]);return Object(n.useContext)(d).currentUser?r.a.createElement(o.a,{to:"/"}):r.a.createElement(ut,null,r.a.createElement("h1",null,"CR Lab"),r.a.createElement(G.a,{onSubmit:c},r.a.createElement(le,null,r.a.createElement(oe,Object.assign({dataKey:"account",validationRules:[{required:!0,message:"Please input your account."},{type:"email",message:"Account should be an email."}],inputProps:{prefix:r.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Account"}},a))),r.a.createElement(le,null,r.a.createElement(oe,Object.assign({dataKey:"password",validationRules:[{required:!0,message:"Please input your password."}],inputProps:{prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}},a))),r.a.createElement(g.a,{htmlType:"submit",style:{float:"right"}},"Log in")))}),st=function(e){var t=e.component,a=Object(u.a)(e,["component"]),c=Object(n.useContext)(d).currentUser;return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/login"})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(l.a,null,r.a.createElement(function(e){var t=e.children,a=Object(n.useState)(null),c=Object(s.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)(function(){f.auth().onAuthStateChanged(l)},[]),r.a.createElement(d.Provider,{value:{currentUser:i}},t)},null,r.a.createElement(function(){return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/login",component:ot}),r.a.createElement(st,{path:"/",component:it}))},null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[232,1,2]]]);
//# sourceMappingURL=main.75188f57.chunk.js.map